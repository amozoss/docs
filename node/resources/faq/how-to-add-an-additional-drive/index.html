<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Run multiple nodes"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="How to add an additional drive?"><meta property="og:description" content="Run multiple nodes"><meta property="og:type" content="article"><meta property="og:url" content="/node/resources/faq/how-to-add-an-additional-drive/"><meta property="article:section" content="node"><title>How to add an additional drive? | Storj Docs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f89e84d24aa67a9627cfb7a3b446b3b062a451eebceb8d5f060601553c0a6cfb.css><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.afc156b59ccdf08ee689010e2667621d6ac7b00f30a969882371f26dd69b9b61.js></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js></script>
<link rel=subresource href=/fonts/Inter-roman.var.woff2><link rel=subresource href=/fonts/Inter-italic.var.woff2></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Storj Docs</span></a></h2><div class=book-search><input type=text id=book-search-input data-filter=/node/ placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-first-sections><li><a href=/dcs/>DCS</a></li><li class=active><a href=/node/>Node Operator</a></li></ul><ul><li class=book-section-flat><span>Before You Begin</span><ul><li><a href=https://registration.storj.io class=book-external-link target=_blank rel=noopener>Signup for Auth Token<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=/node/before-you-begin/auth-token/>Authorization Token</a></li><li><a href=/node/before-you-begin/prerequisites/>Prerequisites</a></li><li><a href=/node/before-you-begin/important-security-consideration/>Important Security Consideration</a></li></ul></li><li class=book-section-flat><span>Dependencies</span><ul><li><a href=/node/dependencies/port-forwarding/>Port Forwarding</a></li><li><input type=checkbox id=section-b3742f83cbd971984704e578f08bf0f3 class=toggle>
<label for=section-b3742f83cbd971984704e578f08bf0f3 class="flex justify-between"><a href=/node/dependencies/quic-requirements/>QUIC requirements</a></label><ul><li><a href=/node/dependencies/quic-requirements/linux-configuration-for-udp/>Linux Configuration for UDP</a></li></ul></li><li><a href=/node/dependencies/identity/>Identity</a></li><li><input type=checkbox id=section-dbdab924f5bd29fffe20af6bd200b671 class=toggle>
<label for=section-dbdab924f5bd29fffe20af6bd200b671 class="flex justify-between"><a href=/node/dependencies/storage-node-operator-payout-information/>Storage Node Operator Payout Information</a></label><ul><li><a href=/node/dependencies/storage-node-operator-payout-information/zk-sync-opt-in-for-snos/>Configuring zkSync Payments</a></li></ul></li></ul></li><li class=book-section-flat><span>Setup</span><ul><li><input type=checkbox id=section-bedd3651ec081b448b597f404e2fa61d class=toggle>
<label for=section-bedd3651ec081b448b597f404e2fa61d class="flex justify-between"><a href=/node/setup/cli/>CLI Install</a></label><ul><li><a href=/node/setup/cli/docker/>Docker</a></li><li><a href=/node/setup/cli/storage-node/>Storage Node</a></li><li><a href=/node/setup/cli/software-updates/>Software Updates</a></li><li><a href=/node/setup/cli/dashboard/>Dashboard</a></li></ul></li><li><input type=checkbox id=section-5ac02fb11074a73d575b39d7c3eaef61 class=toggle>
<label for=section-5ac02fb11074a73d575b39d7c3eaef61 class="flex justify-between"><a href=/node/setup/gui-windows/>GUI Install - Windows</a></label><ul><li><a href=/node/setup/gui-windows/storage-node/>Storage Node</a></li><li><a href=/node/setup/gui-windows/dashboard/>Dashboard</a></li></ul></li></ul></li><li class=book-section-flat><span>SNO Applications</span><ul><li><a href=/node/sno-applications/qnap-storage-node-app/>QNAP Storage Node App</a></li></ul></li><li class=book-section-flat><span>Resources</span><ul><li><input type=checkbox id=section-723c8a61b9d77ed14e6923c8b63c2be6 class=toggle checked>
<label for=section-723c8a61b9d77ed14e6923c8b63c2be6 class="flex justify-between"><a href=/node/resources/faq/>FAQ's</a></label><ul><li><a href=/node/resources/faq/how-the-online-score-is-calculated/>How is the online score calculated?</a></li><li><a href=/node/resources/faq/where-can-i-check-for-a-new-version/>Where can I check for a new version?</a></li><li><a href=/node/resources/faq/check-my-node/>How do I check my node when I'm away from my machine?</a></li><li><a href=/node/resources/faq/machine-restart-shutdown/>What if my machine restarts or shuts down?</a></li><li><a href=/node/resources/faq/system-maintenance/>How do I shutdown my node for system maintenance?</a></li><li><a href=/node/resources/faq/other-commands/>What other commands can I run?</a></li><li><a href=/node/resources/faq/check-logs/>How do I check my logs?</a></li><li><a href=/node/resources/faq/redirect-logs/>How do I redirect my logs to a file?</a></li><li><a href=/node/resources/faq/how-do-i-check-my-l2-payouts/>How do I check my L2 zkSync payouts?</a></li><li><a href=/node/resources/faq/held-back-amount/>How does held back amount work?</a></li><li><a href=/node/resources/faq/how-do-i-change-my-parameters-such-as-payout-address-allotted-storage-space-and-bandwidth/>How do I change values like wallet address or storage capacity?</a></li><li><a href=/node/resources/faq/linux-static-mount/>How do I setup static mount via /etc/fstab for Linux?</a></li><li><a href=/node/resources/faq/how-do-i-estimate-my-potential-earnings-for-given-amount-of-space-and-bandwidth/>How do I estimate my potential earnings for a given amount of space and bandwidth?</a></li><li><a href=/node/resources/faq/storing-more-data/>Why am I not storing more data?</a></li><li><a href=/node/resources/faq/storage-bandwidth-usage/>Why is the network not using all of my storage and bandwidth?</a></li><li><a href=/node/resources/faq/low-payouts/>Why are my payouts so low?</a></li><li><a href=/node/resources/faq/estimate-payouts/>How do I estimate my payouts per Satellite?</a></li><li><input type=checkbox id=section-499e43878357cfbe54d3c81b0862cf13 class=toggle>
<label for=section-499e43878357cfbe54d3c81b0862cf13 class="flex justify-between"><a href=/node/resources/faq/migrate-my-node/>How do I migrate my node to a new device?</a></label><ul><li><a href=/node/resources/faq/migrate-my-node/migrating-from-docker-cli-to-a-gui-install-on-windows/>Migrating from Docker CLI to a GUI Install on Windows</a></li><li><a href=/node/resources/faq/migrate-my-node/migrating-from-windows-gui-installation-to-a-docker-cli/>Migrating from Windows GUI installation to Docker CLI</a></li><li><a href=/node/resources/faq/migrate-my-node/how-to-migrate-the-windows-gui-node-from-a-one-physical-location-to-other/>How to migrate the Windows GUI node from one physical location to another?</a></li></ul></li><li><a href=/node/resources/faq/remote-connection/>What if I'm using a remote connection?</a></li><li><a href=/node/resources/faq/how-to-remote-access-the-web-dashboard/>How to remote access the web dashboard</a></li><li><a href=/node/resources/faq/cli-on-windows-mac/>What if I'm using the CLI Install on Windows / MacOS?</a></li><li><a href=/node/resources/faq/how-to-add-an-additional-drive/ class=active>How to add an additional drive?</a></li><li><a href=/node/resources/faq/where-can-i-find-a-config-yaml/>Where can I find the config.yaml?</a></li></ul></li></ul></li><li class=book-section-flat><span>Have a Question</span><ul><li><a href=https://forum.storj.io/c/sno-category class=book-external-link target=_blank rel=noopener>Ask on our Forum<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://support.storj.io class=book-external-link target=_blank rel=noopener>Search our Knowledge Base<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/storj/issues class=book-external-link target=_blank rel=noopener>Check our Github Issues<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>How to add an additional drive?</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#general-rules-to-run-multiple-nodes-in-the-same-network>General rules to run multiple nodes in the same network</a></li><li><a href=#forwarding-options>Forwarding options</a></li><li><a href=#docker-version>Docker version</a></li><li><a href=#binary-version>Binary version</a></li></ul></nav></aside></header><article class=markdown><h1 id=how-to-add-an-additional-drive>How to add an additional drive?
<a class=anchor href=#how-to-add-an-additional-drive>#</a></h1><p>We recommend to run a new node, if you want to add an additional hard drive.</p><blockquote class="book-hint info"><p>All nodes behind the same subnet /24 of a public IP are treated as a single node for ingress traffic and as separate ones for egress traffic (to the customers, repair and audit) - this is because we want to be decentralized as much as possible.</p><p>Adding more drives/nodes will not increase the ingress traffic, only usage by customers can do this.</p></blockquote><p>You can, of course, use RAID instead, but this reduncancy not required for the network&rsquo;s operation - the network itself has a built-in redundancy due to the usage of erasure codes: the customer needs only 29 pieces out of 80 to reconstruct the whole file.</p><p>If you would like to use RAID anyway, please note - your node will not receive more customer data only because you use RAID, this will not affect the node selection.</p><p>Using RAID0 (LVM, spanned drives, JBOD, etc.) is not recommended - with only one disk failure the whole node is lost.</p><p>Even using RAID5/6 with today&rsquo;s disks is too risky due to bit failure rate on disks with high capacity:
<a href="https://forum.storj.io/t/hardware-configuration-and-receiving-mail-with-token/6445/4?u=alexey">High risk to lose a RAID5 volume during rebuild</a>.</p><p>You can also read the discussion
<a href=https://forum.storj.io/t/raid-vs-no-raid-choice/6776>RAID vs No RAID on our forum</a>.</p><blockquote class="book-hint danger">Each node must have its own generated unique identity signed with a new authorization token. Using a copy of the same identity but different tokens will result in disqualification as it is the same identity but with missing data.</blockquote><h2 id=general-rules-to-run-multiple-nodes-in-the-same-network>General rules to run multiple nodes in the same network
<a class=anchor href=#general-rules-to-run-multiple-nodes-in-the-same-network>#</a></h2><p>If you have only one external address, then you need to have a unique port for each storagenode. The default port for storagenode is <code>28967</code>, protocols <code>TCP+UDP</code>.</p><pre tabindex=0><code># the public address of the node, useful for nodes behind NAT
contact.external-address: &#34;my.ddns.tld:28967&#34;
</code></pre><p>If you want to add an additional new node, you can use the next free port or simply increase the previous used port by 1, for example - <code>28968</code>.</p><p>If you run multiple nodes on the same device, you will need a unique port for the dashboard too. The default port for the dashboard is <code>14002</code> TCP.</p><pre tabindex=0><code># server address of the api gateway and frontend app
# console.address: 127.0.0.1:14002
</code></pre><p>You can use the same rule as for the node&rsquo;s port to select any free port or simply increase the port number by 1, for example - <code>14003</code>. Don&rsquo;t forget to uncomment the parameter in your config (remove <code>#</code> with space after, each option should be started without spaces)!</p><blockquote class="book-hint warning">You need to forward only the external node&rsquo;s port. Please, do not forward the dashboard&rsquo;s port - it has no protection and anyone on the internet can see your private information. See
<a href=/node/resources/faq/how-to-remote-access-the-web-dashboard/>How to remote access the web dashboard</a> guide to connect to your dashboard remotely.</blockquote><p>If you run a binary version of storagenode (
<a href=/node/setup/gui-windows/>Windows GUI</a> for example) or a docker version with <code>--network host</code> option, you also need to have unique internal ports.</p><p>For the node&rsquo;s CLI dashboard, the default internal address and port is <code>127.0.0.1:7778</code>, it is specified in the <code>server.private-address</code> option.</p><pre tabindex=0><code># private address to listen on
server.private-address: 127.0.0.1:7778
</code></pre><p>For the second and any further nodes, you need to specify a unique port for each node there, too.</p><p>The next parameter to change the port is <code>server.address</code>, it contains an internal listen node&rsquo;s address and port, specified as <code>:28967</code> (this is equivalent to <code>0.0.0.0:28967</code>, i.e. it will bind to any local IP) by default.</p><pre tabindex=0><code># public address to listen on
server.address: :28967
</code></pre><p>You need to make these changes for the second and any further additional nodes as well.</p><h2 id=forwarding-options>Forwarding options
<a class=anchor href=#forwarding-options>#</a></h2><p>For example, you decided to configure your second node with port <code>28968</code>. Then you can forward this port to the internal <code>28967</code> port, if the destination local IP is different from the first node. If both nodes are running on the same host, then you need to forward <code>28968</code> to <code>28968</code> and use this port in the <code>contact.external-address:</code> option of the <code>config.yaml</code> (in case of binary) or <code>-e ADDRESS</code> parameter of <code>docker run</code> in case of docker. If you use a binary version (or <code>docker run</code> with <code>--network host</code>), you also need to specify this port in the <code>server.address:</code> too.</p><p>In summary:</p><ol><li>you need to change the <code>contact.external-address:</code> option in <code>config.yaml</code> in case of binary or <code>-e ADDRESS</code> parameter of <code>docker run</code> in case of docker to use the external address and port, i.e. <code>my.ddns.tld:28968</code>.</li><li>if the second node is running on another device, you can forward <code>28968</code> to <code>28967</code>, nothing else is needed to change in the second node configuration except the external address above;</li><li>if the second node is running on the same device as the first one, you need to forward <code>28968</code> to <code>28968</code>, change the <code>server.address:</code> option in the <code>config.yaml</code> (in case of binary or <code>docker run</code> with <code>--network host</code>) or <code>-p 28968:28967</code> parameter in <code>docker run</code> command (in case of docker without <code>--network host</code>).</li></ol><blockquote class="book-hint info"><p>See KB article
<a href=https://support.storj.io/hc/en-us/articles/360042343052-Single-and-multi-node-Port-forwarding-setup>Single and multi-node Port forwarding setup</a> for details.</p><p>See
<a href=/node/dependencies/port-forwarding/>Port Forwarding</a> section for general port forwarding configuration.</p></blockquote><h2 id=docker-version>Docker version
<a class=anchor href=#docker-version>#</a></h2><p>We assume that the second node would be run on the same device as a first one.</p><ol><li>Go to your router and forward port <code>28968</code> to <code>28968</code> and the IP of your device.</li><li><code>docker run</code> will contain:</li></ol><pre tabindex=0><code>docker run .... -p 28968:28967 -p 172.0.0.1:14003:14002 -e ADDRESS=my.ddns.tld:28968 ....
</code></pre><p><em>Please, use the full command from</em>
<a href=/node/setup/cli/storage-node/#running-the-storage-node><em>CLI - run Storage Node</em></a><em>, the above is an excerpt showing only the changed parts.</em></p><blockquote class="book-hint info"><a href=/node/resources/faq/how-do-i-change-my-parameters-such-as-payout-address-allotted-storage-space-and-bandwidth/>How do I change values like wallet address or storage capacity?</a></blockquote><h2 id=binary-version>Binary version
<a class=anchor href=#binary-version>#</a></h2><p>We assume that the second node would be run on the same device as the first one.</p><blockquote class="book-hint info"><p>The Windows GUI installer can install only one node on the same Windows PC. For the second and next nodes we support only the docker version:
<a href=/node/setup/cli/>CLI Install</a>.</p><p>The alternative is to use the unofficial, Community supported Windows Toolbox made by @Vadim:
<a href=https://forum.storj.io/t/win-gui-storj-node-toolbox/4381>https://forum.storj.io/t/win-gui-storj-node-toolbox/4381</a>, it allows you to set up more than one Windows node on the same PC.</p></blockquote><ol><li>Go to your router and forward port <code>28968</code> to <code>28968</code> and IP of your device.</li><li>Change parameters in your <code>config.yaml</code> (see
<a href=/node/resources/faq/where-can-i-find-a-config-yaml/>Where can I find the config.yaml?</a>)):</li></ol><pre tabindex=0><code># the public address of the node, useful for nodes behind NAT
contact.external-address: &#34;my.ddns.tld:28968&#34;
</code></pre><pre tabindex=0><code># public address to listen on
server.address: :28968
</code></pre><pre tabindex=0><code># private address to listen on
server.private-address: 127.0.0.1:7779
</code></pre><pre tabindex=0><code># server address of the api gateway and frontend app
console.address: 127.0.0.1:14003
</code></pre><p>3. Save the <code>config.yaml</code> and restart the <code>storagenode</code> service (see
<a href=/node/resources/faq/system-maintenance/>How do I shutdown my node for system maintenance?</a>).</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#general-rules-to-run-multiple-nodes-in-the-same-network>General rules to run multiple nodes in the same network</a></li><li><a href=#forwarding-options>Forwarding options</a></li><li><a href=#docker-version>Docker version</a></li><li><a href=#binary-version>Binary version</a></li></ul></nav></div></aside></main></body></html>