<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="How to configure L2 Payments with zkSync"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Configuring zkSync Payments"><meta property="og:description" content="How to configure L2 Payments with zkSync"><meta property="og:type" content="article"><meta property="og:url" content="/node/dependencies/storage-node-operator-payout-information/zk-sync-opt-in-for-snos/"><meta property="article:section" content="node"><title>Configuring zkSync Payments | Storj Docs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f89e84d24aa67a9627cfb7a3b446b3b062a451eebceb8d5f060601553c0a6cfb.css><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.afc156b59ccdf08ee689010e2667621d6ac7b00f30a969882371f26dd69b9b61.js></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js></script>
<link rel=subresource href=/fonts/Inter-roman.var.woff2><link rel=subresource href=/fonts/Inter-italic.var.woff2></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Storj Docs</span></a></h2><div class=book-search><input type=text id=book-search-input data-filter=/node/ placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-first-sections><li><a href=/dcs/>DCS</a></li><li class=active><a href=/node/>Node Operator</a></li></ul><ul><li class=book-section-flat><span>Before You Begin</span><ul><li><a href=https://registration.storj.io class=book-external-link target=_blank rel=noopener>Signup for Auth Token<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=/node/before-you-begin/auth-token/>Authorization Token</a></li><li><a href=/node/before-you-begin/prerequisites/>Prerequisites</a></li><li><a href=/node/before-you-begin/important-security-consideration/>Important Security Consideration</a></li></ul></li><li class=book-section-flat><span>Dependencies</span><ul><li><a href=/node/dependencies/port-forwarding/>Port Forwarding</a></li><li><input type=checkbox id=section-b3742f83cbd971984704e578f08bf0f3 class=toggle>
<label for=section-b3742f83cbd971984704e578f08bf0f3 class="flex justify-between"><a href=/node/dependencies/quic-requirements/>QUIC requirements</a></label><ul><li><a href=/node/dependencies/quic-requirements/linux-configuration-for-udp/>Linux Configuration for UDP</a></li></ul></li><li><a href=/node/dependencies/identity/>Identity</a></li><li><input type=checkbox id=section-dbdab924f5bd29fffe20af6bd200b671 class=toggle checked>
<label for=section-dbdab924f5bd29fffe20af6bd200b671 class="flex justify-between"><a href=/node/dependencies/storage-node-operator-payout-information/>Storage Node Operator Payout Information</a></label><ul><li><a href=/node/dependencies/storage-node-operator-payout-information/zk-sync-opt-in-for-snos/ class=active>Configuring zkSync Payments</a></li></ul></li></ul></li><li class=book-section-flat><span>Setup</span><ul><li><input type=checkbox id=section-bedd3651ec081b448b597f404e2fa61d class=toggle>
<label for=section-bedd3651ec081b448b597f404e2fa61d class="flex justify-between"><a href=/node/setup/cli/>CLI Install</a></label><ul><li><a href=/node/setup/cli/docker/>Docker</a></li><li><a href=/node/setup/cli/storage-node/>Storage Node</a></li><li><a href=/node/setup/cli/software-updates/>Software Updates</a></li><li><a href=/node/setup/cli/dashboard/>Dashboard</a></li></ul></li><li><input type=checkbox id=section-5ac02fb11074a73d575b39d7c3eaef61 class=toggle>
<label for=section-5ac02fb11074a73d575b39d7c3eaef61 class="flex justify-between"><a href=/node/setup/gui-windows/>GUI Install - Windows</a></label><ul><li><a href=/node/setup/gui-windows/storage-node/>Storage Node</a></li><li><a href=/node/setup/gui-windows/dashboard/>Dashboard</a></li></ul></li></ul></li><li class=book-section-flat><span>SNO Applications</span><ul><li><a href=/node/sno-applications/qnap-storage-node-app/>QNAP Storage Node App</a></li></ul></li><li class=book-section-flat><span>Resources</span><ul><li><input type=checkbox id=section-723c8a61b9d77ed14e6923c8b63c2be6 class=toggle>
<label for=section-723c8a61b9d77ed14e6923c8b63c2be6 class="flex justify-between"><a href=/node/resources/faq/>FAQ's</a></label><ul><li><a href=/node/resources/faq/how-the-online-score-is-calculated/>How is the online score calculated?</a></li><li><a href=/node/resources/faq/where-can-i-check-for-a-new-version/>Where can I check for a new version?</a></li><li><a href=/node/resources/faq/check-my-node/>How do I check my node when I'm away from my machine?</a></li><li><a href=/node/resources/faq/machine-restart-shutdown/>What if my machine restarts or shuts down?</a></li><li><a href=/node/resources/faq/system-maintenance/>How do I shutdown my node for system maintenance?</a></li><li><a href=/node/resources/faq/other-commands/>What other commands can I run?</a></li><li><a href=/node/resources/faq/check-logs/>How do I check my logs?</a></li><li><a href=/node/resources/faq/redirect-logs/>How do I redirect my logs to a file?</a></li><li><a href=/node/resources/faq/how-do-i-check-my-l2-payouts/>How do I check my L2 zkSync payouts?</a></li><li><a href=/node/resources/faq/held-back-amount/>How does held back amount work?</a></li><li><a href=/node/resources/faq/how-do-i-change-my-parameters-such-as-payout-address-allotted-storage-space-and-bandwidth/>How do I change values like wallet address or storage capacity?</a></li><li><a href=/node/resources/faq/linux-static-mount/>How do I setup static mount via /etc/fstab for Linux?</a></li><li><a href=/node/resources/faq/how-do-i-estimate-my-potential-earnings-for-given-amount-of-space-and-bandwidth/>How do I estimate my potential earnings for a given amount of space and bandwidth?</a></li><li><a href=/node/resources/faq/storing-more-data/>Why am I not storing more data?</a></li><li><a href=/node/resources/faq/storage-bandwidth-usage/>Why is the network not using all of my storage and bandwidth?</a></li><li><a href=/node/resources/faq/low-payouts/>Why are my payouts so low?</a></li><li><a href=/node/resources/faq/estimate-payouts/>How do I estimate my payouts per Satellite?</a></li><li><input type=checkbox id=section-499e43878357cfbe54d3c81b0862cf13 class=toggle>
<label for=section-499e43878357cfbe54d3c81b0862cf13 class="flex justify-between"><a href=/node/resources/faq/migrate-my-node/>How do I migrate my node to a new device?</a></label><ul><li><a href=/node/resources/faq/migrate-my-node/migrating-from-docker-cli-to-a-gui-install-on-windows/>Migrating from Docker CLI to a GUI Install on Windows</a></li><li><a href=/node/resources/faq/migrate-my-node/migrating-from-windows-gui-installation-to-a-docker-cli/>Migrating from Windows GUI installation to Docker CLI</a></li><li><a href=/node/resources/faq/migrate-my-node/how-to-migrate-the-windows-gui-node-from-a-one-physical-location-to-other/>How to migrate the Windows GUI node from one physical location to another?</a></li></ul></li><li><a href=/node/resources/faq/remote-connection/>What if I'm using a remote connection?</a></li><li><a href=/node/resources/faq/how-to-remote-access-the-web-dashboard/>How to remote access the web dashboard</a></li><li><a href=/node/resources/faq/cli-on-windows-mac/>What if I'm using the CLI Install on Windows / MacOS?</a></li><li><a href=/node/resources/faq/how-to-add-an-additional-drive/>How to add an additional drive?</a></li><li><a href=/node/resources/faq/where-can-i-find-a-config-yaml/>Where can I find the config.yaml?</a></li></ul></li></ul></li><li class=book-section-flat><span>Have a Question</span><ul><li><a href=https://forum.storj.io/c/sno-category class=book-external-link target=_blank rel=noopener>Ask on our Forum<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://support.storj.io class=book-external-link target=_blank rel=noopener>Search our Knowledge Base<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/storj/issues class=book-external-link target=_blank rel=noopener>Check our Github Issues<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Configuring zkSync Payments</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#get-started-and-opt-in><strong>Get Started and Opt-in</strong></a><ul><li><a href=#binary-versions-include-windowslinux-gui>Binary versions (include Windows/Linux GUI)</a></li><li><a href=#docker-versions>Docker versions</a></li><li><a href=#how-to-check-the-opt-in-for-zksync>How to check the opt-in for zkSync</a></li></ul></li><li><a href=#understanding-zksync-fees>Understanding zkSync fees</a></li><li><a href=#send-tokens-from-zksync-l2-to-ethereum-l1>Send tokens from zkSync (L2) to Ethereum (L1)</a><ul><li><a href=#complete-send-to-ethereum>Complete Send to Ethereum</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=configuring-zksync-payments>Configuring zkSync Payments
<a class=anchor href=#configuring-zksync-payments>#</a></h1><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><p><strong>Storj is continuously innovating to bring the decentralized cloud to the masses</strong></p><p>We are excited to bring Layer 2 (L2) ethereum scaling through ZK Rollups to our community. L2 scaling aligns with our goal of bringing decentralized cloud storage to the masses - via more efficient and autonomous payments.</p><p>Here are a few of the benefits to receiving payouts through this approach:</p><p><strong>Better Scalability</strong><br>With zkSync, payouts will consume less block space on the Ethereum network because transactions are bundled together and processed in batches. The system is currently capable of processing 2000 transactions per second!</p><p><strong>Lower Layer 2 Transfer Fees</strong><br>ZkSync also dramatically lowers network transfer fees (compared to Layer 1 fees) for operators sharing their hard drive space and bandwidth on the Storj network. ZkSync accounts are tied to your existing Ethereum keys and current transaction fees on L2 are as low as ~0.000543 ETH at 210 Gwei. As the zkSync ecosystem grows, interoperability between projects and exchanges means even more savings. These fees can be reinvested in the community, creating new incentives for network operators to drive growth.</p><p><strong>Pay Network Fees in STORJ Token</strong><br>One of the most interesting things about zkSync is it supports &ldquo;gasless meta-transactions&rdquo; that allow users to pay transaction fees in the tokens being transferred. For example, if you want to transfer STORJ from L2 to an exchange, smart contract, or other address, there is no need for you to own ETH or any other tokens.</p><h2 id=get-started-and-opt-in><strong>Get Started and Opt-in</strong>
<a class=anchor href=#get-started-and-opt-in>#</a></h2><p><em>To opt-in to zkSync you need to do a simple change in your Node configuration by following these steps:</em></p><h3 id=binary-versions-include-windowslinux-gui>Binary versions (include Windows/Linux GUI)
<a class=anchor href=#binary-versions-include-windowslinux-gui>#</a></h3><p>Open your storage node&rsquo;s <code>config.yaml</code> (see
<a href=/node/resources/faq/where-can-i-find-a-config-yaml/>Where can I find the config.yaml?</a>)) and add the line</p><pre tabindex=0><code>operator.wallet-features: [&#34;zksync&#34;]
</code></pre><blockquote class="book-hint warning">Please enter everything in lowercase and double-check for spelling mistakes. This is a very basic implementation without any validations.</blockquote><p>Once you have added the line to your config file, save it and restart your node.</p><h3 id=docker-versions>Docker versions
<a class=anchor href=#docker-versions>#</a></h3><p>If you use a docker version, you can also specify the <code>zksync</code> wallet feature as an option after the image name, for example:</p><pre tabindex=0><code>docker run ... storjlabs/storagenode:latest --operator.wallet-features=zksync
</code></pre><blockquote class="book-hint warning">Please enter everything in lowercase and double-check for spelling mistakes. This is a very basic implementation without any validations.</blockquote><p>If you decided to specify the <code>zksync</code> wallet feature as an option, you need to stop and remove the container and run it back with all your parameters include added option for wallet feature, otherwise you can just restart the container.</p><h3 id=how-to-check-the-opt-in-for-zksync>How to check the opt-in for zkSync
<a class=anchor href=#how-to-check-the-opt-in-for-zksync>#</a></h3><p>Navigate to your personal web-dashboard, you should see an indication of zkSync enabled:</p><p><img src=/node/_assets/image%20%2842%29.png alt="The change to the payment method will be indicated in your personal dashboard"></p><p>After opting-in for zkSync payouts for STORJ payments, gather your ETH address and private key, navigate to the zkSync Wallet (
<a href=https://wallet.zksync.io>https://wallet.zksync.io/</a>), and connect your L1 ethereum wallet. If you have problems accessing your wallet, you might want to change your payout address to an address that you can access (for which you control the private keys).</p><p><img src=/node/_assets/image%20%2829%29.png alt></p><p><strong>Supported Wallets:</strong> zkSync supports WalletConnect, an open source protocol for connecting decentralized applications to mobile wallets. The protocol also supports hardware wallets like Trezor/Ledger and software wallets like Metamask, Fortmatic, Portis, Oper, Dapper, Lattice and Torus.</p><p>Finally, zkSync enables our Storage Node Operators to more easily interact directly with the world of DeFi through solutions like Curve, Numio, Uniswap V3, and others.</p><p><strong>We are excited to share this update around payment scaling with our community of operators. If you have any questions about using zkSync, check out our documentation. If you have ideas, or would like to talk with the team, please feel free to</strong>
<a href=http://forum.storj.io><strong>reach out on our forum</strong></a><strong>.</strong></p><p><a href=/node/dependencies/storage-node-operator-payout-information/>You can read more about our approach to storage node payouts in general here.</a></p><h2 id=understanding-zksync-fees>Understanding zkSync fees
<a class=anchor href=#understanding-zksync-fees>#</a></h2><p>Matter Labs runs an API for calculating transfer fees. Here&rsquo;s an example session to determine the <em>Layer 2 to Layer 1 withdrawal fee</em>:</p><pre tabindex=0><code>curl -X POST -H &#39;Content-type: application/json&#39;   -d &#39;{
     &#34;jsonrpc&#34;:&#34;2.0&#34;,
     &#34;id&#34;:1, &#34;method&#34;: &#34;get_tx_fee&#34;,
     &#34;params&#34;: [&#34;Withdraw&#34;, &#34;0x80a52B7F26426d2b16578FC5f376c349F54772A7&#34;, &#34;STORJ&#34;]
     }&#39;   https://api.zksync.io/jsrpc | jq
</code></pre><p>Sample output:</p><pre tabindex=0><code>{
  &#34;jsonrpc&#34;: &#34;2.0&#34;,
  &#34;result&#34;: {
    &#34;feeType&#34;: &#34;Withdraw&#34;,
    &#34;gasTxAmount&#34;: &#34;52700&#34;,
    &#34;gasPriceWei&#34;: &#34;121000000437&#34;,
    &#34;gasFee&#34;: &#34;3197359019&#34;,
    &#34;zkpFee&#34;: &#34;1192017&#34;,
    &#34;totalFee&#34;: &#34;3190000000&#34;
  },
  &#34;id&#34;: 1
}
</code></pre><p>This tells us that at a gas price of approximately 121 GWei, the withdrawal fee is about 31.9 STORJ. Note that this is only an example, actual fees will vary depending on current STORJ-ETH exchange rates.</p><p>Here is an example of a <em>Layer 2 to Layer 2 transfer fee</em>:</p><pre tabindex=0><code>curl -X POST -H &#39;Content-type: application/json&#39;   -d &#39;{
    &#34;jsonrpc&#34;:&#34;2.0&#34;,
    &#34;id&#34;:1, &#34;method&#34;: &#34;get_tx_fee&#34;,
    &#34;params&#34;: [&#34;Transfer&#34;, &#34;0x80a52B7F26426d2b16578FC5f376c349F54772A7&#34;, &#34;STORJ&#34;]
    }&#39;   https://api.zksync.io/jsrpc | jq
</code></pre><p>Sample output:</p><pre tabindex=0><code>{
  &#34;jsonrpc&#34;: &#34;2.0&#34;,
  &#34;result&#34;: {
    &#34;feeType&#34;: &#34;TransferToNew&#34;,
    &#34;gasTxAmount&#34;: &#34;1980&#34;,
    &#34;gasPriceWei&#34;: &#34;121000000437&#34;,
    &#34;gasFee&#34;: &#34;120128480&#34;,
    &#34;zkpFee&#34;: &#34;1192017&#34;,
    &#34;totalFee&#34;: &#34;121300000&#34;
  },
  &#34;id&#34;: 1
}
</code></pre><p>This tells us that at a gas price of approximately 121 Gwei, the transfer fee would be about 1.2 STORJ.</p><p>You can learn more in the
<a href=https://zksync.io/api/>zkSync Documentation</a>.</p><h2 id=send-tokens-from-zksync-l2-to-ethereum-l1>Send tokens from zkSync (L2) to Ethereum (L1)
<a class=anchor href=#send-tokens-from-zksync-l2-to-ethereum-l1>#</a></h2><p>If you want to withdraw your tokens from your zkSync L2 wallet address to any L1 address, you need to reconnect your L1 Ethereum wallet to zkSync with
<a href=https://wallet.zksync.io>https://wallet.zksync.io/</a> - once connected, it will show your L2 token balance as shown below.</p><p><img src=/node/_assets/image%20%2853%29.png alt></p><p>Now click the <strong>Send</strong> button, and in the next window you will be able to send to Ethereum (L1).</p><p><img src=/node/_assets/image%20%2850%29.png alt="Send window"></p><p>Click the <strong>Send to Ethereum (L1)</strong> link.</p><p><img src=/node/_assets/image%20%2851%29.png alt="Send to Ethereum"></p><p>In the <em><strong>Send to Ethereum</strong></em> window you can select or specify the L1 address that should receive the tokens you are sending in the <em>Address</em> field. This field will display your own L1 wallet address by default (which is the same as on L2), but you can change it to any other L1 address. For example, if you plan to immediately sell the tokens, you could choose an exchange&rsquo;s STORJ deposit address. This will allow you to directly withdraw STORJ from your L2 zkSync wallet address to an exchange L1 deposit address in one single transaction.</p><p>To select a different address from your <strong>Contacts</strong>, you can click on the <strong>Own account[v]</strong> link.</p><p>This window also allows you to change which type of token to use to pay for the withdrawal fee. So if you are sending STORJ, by default part of your STORJ balance will be used for paying the withdrawal fee, but you can also select ETH for example, if you have sufficient ETH in the same wallet address to pay the withdrawal fee. To change the type of token to use for paying the gas fees, click the <strong>Change fee token</strong> button and select a different token.</p><blockquote class="book-hint info">Currently, zkSync requires users to pay a one-time activation fee for registering your address to zkSync, as this requires an on-chain transaction (you can elect to pay it with your STORJ tokens rather than ETH). See
<a href=https://zksync.io/faq/faq.html#what-is-the-account-activation-fee>What is the activation fee on zkSync</a>.</blockquote><h3 id=complete-send-to-ethereum>Complete Send to Ethereum
<a class=anchor href=#complete-send-to-ethereum>#</a></h3><ol><li>Replace the destination address with the one you want to send the tokens to. You can save the entered address to <strong>Contacts</strong> later.</li><li>Click the <strong>Select token</strong> button and select STORJ.</li></ol><p><img src=/node/_assets/image%20%2854%29.png alt="Select a token"></p><p>3. Enter the amount you want to send into the <strong>Amount</strong> field. You will see a transaction fee,
<a href=https://zksync.io/faq/tutorials.html#account-activation>one-time activation fee</a> (only the first time you make a send to Ethereum), and the estimated fee values expressed in the token you selected (STORJ) and its equivalent value in USD.</p><p><img src=/node/_assets/image%20%2849%29.png alt></p><p>4. Authorize the <em>Send to Ethereum</em> by pressing the <strong>Authorize to Send to Ethereum</strong> button. You will be asked for confirmation in your Wallet.</p><p><img src=/node/_assets/image%20%2848%29.png alt></p><p>5. Confirm sending by pressing the <strong>Send to Ethereum</strong> button. You should be able to verify the withdrawal transaction was successful in <strong>History</strong>.</p><p>See also
<a href=https://zksync.io/faq/tutorials.html#send-funds-to-ethereum>Send Funds to Ethereum</a> for details.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#get-started-and-opt-in><strong>Get Started and Opt-in</strong></a><ul><li><a href=#binary-versions-include-windowslinux-gui>Binary versions (include Windows/Linux GUI)</a></li><li><a href=#docker-versions>Docker versions</a></li><li><a href=#how-to-check-the-opt-in-for-zksync>How to check the opt-in for zkSync</a></li></ul></li><li><a href=#understanding-zksync-fees>Understanding zkSync fees</a></li><li><a href=#send-tokens-from-zksync-l2-to-ethereum-l1>Send tokens from zkSync (L2) to Ethereum (L1)</a><ul><li><a href=#complete-send-to-ethereum>Complete Send to Ethereum</a></li></ul></li></ul></nav></div></aside></main></body></html>