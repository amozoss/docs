<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Strong encryption is essential when data is stored on a network of storage nodes operated by 3rd parties"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="How Encryption is Implemented"><meta property="og:description" content="Strong encryption is essential when data is stored on a network of storage nodes operated by 3rd parties"><meta property="og:type" content="article"><meta property="og:url" content="/dcs/concepts/encryption-key/how-encryption-is-implemented/"><meta property="article:section" content="dcs"><title>How Encryption is Implemented | Storj Docs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f89e84d24aa67a9627cfb7a3b446b3b062a451eebceb8d5f060601553c0a6cfb.css><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.afc156b59ccdf08ee689010e2667621d6ac7b00f30a969882371f26dd69b9b61.js></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js></script>
<link rel=subresource href=/fonts/Inter-roman.var.woff2><link rel=subresource href=/fonts/Inter-italic.var.woff2></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Storj Docs</span></a></h2><div class=book-search><input type=text id=book-search-input data-filter=/dcs/ placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-first-sections><li class=active><a href=/dcs/>DCS</a></li><li><a href=/node/>Node Operator</a></li></ul><ul><li class=book-section-flat><span>Decentralized Cloud Storage</span><ul><li><a href=/dcs/storage/considerations/>Product Overview</a></li></ul></li><li class=book-section-flat><span>Downloads</span><ul><li><a href=/dcs/downloads/download-uplink-cli/>Download Uplink CLI</a></li><li><a href=/dcs/downloads/download-self-hosted-s3-compatible-gateway/>Download Self-hosted S3 Compatible Gateway</a></li><li><a href=/dcs/downloads/download-storj-client-libraries/>Download Storj Client Libraries</a></li></ul></li><li class=book-section-flat><span>Getting Started</span><ul><li><a href=/dcs/getting-started/quickstart-guide/>Quickstart Guide</a></li><li><a href=/dcs/getting-started/quickstart-objectbrowser/>Quickstart - Object Browser</a></li><li><input type=checkbox id=section-8a2bc98c91c60155c8bcc6967e5b3cf7 class=toggle>
<label for=section-8a2bc98c91c60155c8bcc6967e5b3cf7 class="flex justify-between"><a href=/dcs/getting-started/gateway-mt/>Quickstart - AWS CLI and Hosted Gateway MT</a></label><ul><li><a href=/dcs/getting-started/gateway-mt/aws-cli-advanced-options/>AWS CLI Advanced Options</a></li></ul></li><li><a href=/dcs/getting-started/quickstart-aws-sdk-and-hosted-gateway-mt/>Quickstart - AWS SDK and Hosted Gateway MT</a></li><li><input type=checkbox id=section-eb51eff27101399663fec0a5feb790b7 class=toggle>
<label for=section-eb51eff27101399663fec0a5feb790b7 class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/>Quickstart - Uplink CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/prerequisites/>Prerequisites</a></li><li><input type=checkbox id=section-1cc3e1bb03e2e308966123bb1cc84dfc class=toggle>
<label for=section-1cc3e1bb03e2e308966123bb1cc84dfc class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/>Uploading Your First Object CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-first-access-grant/>Create an Access Grant</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/set-up-uplink-cli/>Set Up Uplink CLI with Access Grant</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-a-bucket/>Create a Bucket</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/upload-an-object/>Upload an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/view-distribution-of-an-object/>View Distribution of an Object</a></li></ul></li><li><input type=checkbox id=section-ef98e9c48f14a1e6e3291b7ffdd021df class=toggle>
<label for=section-ef98e9c48f14a1e6e3291b7ffdd021df class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/>Interacting With Your First Object CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/list-an-object/>List an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/download-an-object/>Download an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/delete-an-object/>Delete an Object</a></li></ul></li><li><input type=checkbox id=section-583035221fd089be3bccd9566e3d01dd class=toggle>
<label for=section-583035221fd089be3bccd9566e3d01dd class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/>Sharing Your First Object</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/prerequisites/>Prerequisites</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/generate-access/>Create an Access to an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/import-access/>Import an Access to an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/revoke-an-access-to-an-object/>Revoke an Access to an Object</a></li></ul></li><li><input type=checkbox id=section-5272dcaf3a9682609c7d3fdd368cf961 class=toggle>
<label for=section-5272dcaf3a9682609c7d3fdd368cf961 class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/>Advanced Usage</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/generate-a-token/>Create Access Grant in CLI</a></li></ul></li></ul></li><li><input type=checkbox id=section-e035376383ed4301f1acc99452a9495f class=toggle>
<label for=section-e035376383ed4301f1acc99452a9495f class="flex justify-between"><a href=/dcs/getting-started/satellite-developer-account/>Quickstart - Satellite Admin Console</a></label><ul><li><a href=/dcs/getting-started/satellite-developer-account/creating-your-account/>Creating Your Account</a></li><li><a href=/dcs/getting-started/satellite-developer-account/manage-projects/>Manage Projects</a></li><li><a href=/dcs/getting-started/satellite-developer-account/dashboard/>Dashboard</a></li><li><a href=/dcs/getting-started/satellite-developer-account/objects/>Buckets</a></li><li><a href=/dcs/getting-started/satellite-developer-account/access-grants/>Access</a></li><li><a href=/dcs/getting-started/satellite-developer-account/users/>Users</a></li><li><a href=/dcs/getting-started/satellite-developer-account/billing/>Billing</a></li><li><a href=/dcs/getting-started/satellite-developer-account/resources/>Resources</a></li><li><a href=/dcs/getting-started/satellite-developer-account/quick-start/>Quick Start</a></li><li><a href=/dcs/getting-started/satellite-developer-account/my-account/>My Account</a></li></ul></li></ul></li><li class=book-section-flat><span>SDK & Reference</span><ul><li><input type=checkbox id=section-e71eaa406f51abd64ce74a83dbe5dd13 class=toggle>
<label for=section-e71eaa406f51abd64ce74a83dbe5dd13 class="flex justify-between"><a href=/dcs/api-reference/s3-compatible-gateway/>Storj-hosted S3 Compatible Gateway</a></label><ul><li><input type=checkbox id=section-5fc59ab320b4677ae3ebd53fe7b10db5 class=toggle>
<label for=section-5fc59ab320b4677ae3ebd53fe7b10db5 class="flex justify-between"><a href=/dcs/api-reference/s3-compatible-gateway/multipart-upload/>Multipart Upload</a></label><ul><li><a href=/dcs/api-reference/s3-compatible-gateway/multipart-upload/multipart-part-size/>Multipart Part Size</a></li></ul></li><li><a href=/dcs/api-reference/s3-compatible-gateway/using-presigned-urls/>Using presigned URLs</a></li><li><a href=/dcs/api-reference/s3-compatible-gateway/supported-s3-commands/>Supported S3 Commands</a></li></ul></li><li><input type=checkbox id=section-e534a50d47604ebc17cdb3d09a7bbe5c class=toggle>
<label for=section-e534a50d47604ebc17cdb3d09a7bbe5c class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/>Uplink CLI</a></label><ul><li><input type=checkbox id=section-ab2e55a365604a01b5cad7151a01b544 class=toggle>
<label for=section-ab2e55a365604a01b5cad7151a01b544 class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/access-command/>access</a></label><ul><li><a href=/dcs/api-reference/uplink-cli/access-command/access-inspect-command/>access inspect</a></li><li><a href=/dcs/api-reference/uplink-cli/access-command/access-list-command/>access list</a></li><li><a href=/dcs/api-reference/uplink-cli/access-command/access-register/>access register</a></li></ul></li><li><a href=/dcs/api-reference/uplink-cli/cp-command/>cp</a></li><li><a href=/dcs/api-reference/uplink-cli/import-command/>import</a></li><li><a href=/dcs/api-reference/uplink-cli/ls-command/>ls</a></li><li><a href=/dcs/api-reference/uplink-cli/uplink-mb-command/>mb</a></li><li><input type=checkbox id=section-12823ba9c45a10b81b0eaecb4dfc8ebb class=toggle>
<label for=section-12823ba9c45a10b81b0eaecb4dfc8ebb class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/meta-command/>meta</a></label><ul><li><a href=/dcs/api-reference/uplink-cli/meta-command/meta-get-command/>meta get</a></li></ul></li><li><a href=/dcs/api-reference/uplink-cli/mv/>mv</a></li><li><a href=/dcs/api-reference/uplink-cli/rb-command/>rb</a></li><li><a href=/dcs/api-reference/uplink-cli/rm-command/>rm</a></li><li><a href=/dcs/api-reference/uplink-cli/setup-command/>setup</a></li><li><a href=/dcs/api-reference/uplink-cli/share-command/>share</a></li></ul></li><li><input type=checkbox id=section-03ffd000c84f3189e27b539e51443e62 class=toggle>
<label for=section-03ffd000c84f3189e27b539e51443e62 class="flex justify-between"><a href=/dcs/api-reference/s3-gateway/>Self-hosted S3 Compatible Gateway</a></label><ul><li><a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/>Gateway ST Advanced Usage</a></li></ul></li><li><a href=/dcs/api-reference/linksharing-service/>Linksharing Service</a></li><li><input type=checkbox id=section-0848317479e2fc58b812eefd4912b4a4 class=toggle>
<label for=section-0848317479e2fc58b812eefd4912b4a4 class="flex justify-between"><a href=/dcs/api-reference/storj-client-libraries/>Storj Client Libraries</a></label><ul><li><a href=https://github.com/storj/uplink class=book-external-link target=_blank rel=noopener>Go<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-c class=book-external-link target=_blank rel=noopener>C<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-android class=book-external-link target=_blank rel=noopener>Android<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-java class=book-external-link target=_blank rel=noopener>Java<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://www.npmjs.com/package/uplink-nodejs class=book-external-link target=_blank rel=noopener>NodeJS<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></li><li class=book-section-flat><span>How To's</span><ul><li><a href=/dcs/how-tos/container-registry-docker/>Container Registry - Docker</a></li><li><input type=checkbox id=section-591e24e11327becce048ce6a5d0b3e18 class=toggle>
<label for=section-591e24e11327becce048ce6a5d0b3e18 class="flex justify-between"><a href=/dcs/how-tos/host-a-static-website/>Host a Static Website</a></label><ul><li><a href=/dcs/how-tos/host-a-static-website/host-a-static-website-with-the-cli-and-linksharing-service/>Host a Static Website with the Uplink CLI and Linksharing Service</a></li></ul></li><li><a href=/dcs/how-tos/configure-tools-for-the-partner-program/>Configure Tools for the Partner Program</a></li><li><a href=/dcs/how-tos/fastly-integration/>Fastly Integration</a></li><li><a href=https://filebase.com class=book-external-link target=_blank rel=noopener>Configure Filebase for easy upload<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=/dcs/how-tos/backup-with-duplicati/>Backup With Duplicati</a></li><li><a href=/dcs/how-tos/nft-storage/>NFT storage for OpenSea</a></li><li><input type=checkbox id=section-8fe4791a1117b6b147a551b2324e5838 class=toggle>
<label for=section-8fe4791a1117b6b147a551b2324e5838 class="flex justify-between"><a href=/dcs/how-tos/sync-files-with-rclone/>Sync Files With Rclone</a></label><ul><li><a href=/dcs/how-tos/sync-files-with-rclone/rclone-with-native-integration/>Rclone with Native Integration</a></li><li><a href=/dcs/how-tos/sync-files-with-rclone/rclone-with-hosted-gateway/>Rclone with Hosted Gateway</a></li></ul></li><li><a href=/dcs/how-tos/backup-with-restic/>Backup With Restic</a></li><li><a href=/dcs/how-tos/set-up-filezilla-for-decentralized-file-transfer/>FileZilla Native Integration</a></li><li><a href=/dcs/how-tos/filezilla-pro-integration-guide/>Filezilla Pro Integration Guide</a></li><li><a href=/dcs/how-tos/mongodb-ops-manager-backup/>MongoDB Ops Manager Backup</a></li><li><a href=/dcs/how-tos/tesla-sentry-mode-teslausb/>Store Tesla Sentry Mode & Dashcam videos on Storj DCS</a></li><li><a href=/dcs/how-tos/how-to-connect-s3fs-to-storj-dcs/>How to connect s3fs to Storj DCS</a></li><li><a href=/dcs/how-tos/how-to-set-up-video-analytics-and-video-management-with-kerberos-vault/>How to set up video analytics and video management with Kerberos Vault</a></li><li><a href=/dcs/how-tos/how-to-hod-rod-file-transfer-performance-on-storj-dcs/>How to Hod Rod File Transfer Performance on Storj DCS</a></li><li><a href=/dcs/how-tos/backups-with-hashbackup/>Backups with HashBackup</a></li><li><a href=/dcs/how-tos/how-to-use-plex-and-storj-dcs-as-a-private-streaming-service/>How to use Plex and Storj DCS as a private streaming service</a></li><li><a href=/dcs/how-tos/how-to-use-cyberduck-and-storj-dcs/>How to use Cyberduck and Storj DCS</a></li><li><a href=/dcs/how-tos/storj-ipfs-pinning-service-beta/>Storj IPFS Pinning Service (Beta)</a></li><li><a href=/dcs/how-tos/simplify-file-management-with-s3-browser-and-storj-dcs/>Simplify File Management with S3 Browser and Storj DCS</a></li><li><a href=/dcs/how-tos/kubernetes-backup-via-velero/>Kubernetes Backup via Velero</a></li></ul></li><li class=book-section-flat><span>Solution Architectures</span><ul><li><a href=/dcs/solution-architectures/common-use-cases/>Common Use Cases</a></li><li><a href=/dcs/solution-architectures/common-architectural-patterns/>Common Architectural Patterns</a></li></ul></li><li class=book-section-flat><span>Concepts</span><ul><li><a href=/dcs/concepts/overview/>Understanding Storj DCS</a></li><li><a href=/dcs/concepts/definitions/>Definitions</a></li><li><a href=/dcs/concepts/key-architecture-constructs/>Key Architecture Constructs</a></li><li><input type=checkbox id=section-e3983b48cc8585311f4fd92a3441c885 class=toggle>
<label for=section-e3983b48cc8585311f4fd92a3441c885 class="flex justify-between"><a href=/dcs/concepts/access/>Access Management</a></label><ul><li><input type=checkbox id=section-2aaccce9e50f91dfc9ae1f4f2919e73d class=toggle>
<label for=section-2aaccce9e50f91dfc9ae1f4f2919e73d class="flex justify-between"><a href=/dcs/concepts/access/access-grants/>Access Grants</a></label><ul><li><input type=checkbox id=section-6532f8fab18a0bf2730b54084407ef27 class=toggle>
<label for=section-6532f8fab18a0bf2730b54084407ef27 class="flex justify-between"><a href=/dcs/concepts/access/access-grants/api-key/>API Key</a></label><ul><li><a href=/dcs/concepts/access/access-grants/api-key/restriction/>Access Restrictions</a></li></ul></li><li><a href=/dcs/concepts/access/access-grants/when-to-use-the-satellite-web-interface-and-when-to-use-the-cli/>When to use the Satellite Web Interface and When to use the CLI</a></li></ul></li><li><input type=checkbox id=section-d17166aeaa257fe6cfe34e9469861364 class=toggle>
<label for=section-d17166aeaa257fe6cfe34e9469861364 class="flex justify-between"><a href=/dcs/concepts/access/encryption-and-keys/>Encryption Keys</a></label><ul><li><a href=/dcs/concepts/access/encryption-and-keys/key-management/>Key Management</a></li><li><a href=/dcs/concepts/access/encryption-and-keys/when-to-use-different-encryption-keys/>When to use different encryption keys</a></li></ul></li><li><a href=/dcs/concepts/access/access-revocation/>Access Revocation</a></li><li><a href=/dcs/concepts/access/capability-based-access-control/>Capability Based Access vs Access Control Lists</a></li><li><a href=/dcs/concepts/access/access-management-at-the-edge/>Access Management at the Edge</a></li></ul></li><li><input type=checkbox id=section-32bee2047eb722c84da55e9b4fbd0a7e class=toggle>
<label for=section-32bee2047eb722c84da55e9b4fbd0a7e class="flex justify-between"><a href=/dcs/concepts/edge-services/>Edge Services</a></label><ul><li><a href=/dcs/concepts/edge-services/auth-service/>Auth Service</a></li></ul></li><li><a href=/dcs/concepts/connectors/>Connectors</a></li><li><a href=/dcs/concepts/data-structure/>Data Structure</a></li><li><input type=checkbox id=section-273072f64771f53acb81a101acf9cdb9 class=toggle checked>
<label for=section-273072f64771f53acb81a101acf9cdb9 class="flex justify-between"><a href=/dcs/concepts/encryption-key/>Encryption</a></label><ul><li><a href=/dcs/concepts/encryption-key/how-encryption-is-implemented/ class=active>How Encryption is Implemented</a></li><li><a href=/dcs/concepts/encryption-key/design-decision-end-to-end-encryption/>Design Decision: End-to-end Encryption</a></li><li><a href=/dcs/concepts/encryption-key/design-decision-server-side-encryption/>Design Decision: Server-side Encryption</a></li></ul></li><li><input type=checkbox id=section-390f7f447019f4755db05aad8ca13661 class=toggle>
<label for=section-390f7f447019f4755db05aad8ca13661 class="flex justify-between"><a href=/dcs/concepts/decentralization/>Decentralization</a></label><ul><li><a href=/dcs/concepts/decentralization/coordination-avoidance/>Coordination Avoidance</a></li></ul></li><li><a href=/dcs/concepts/file-redundancy/>File Redundancy</a></li><li><a href=/dcs/concepts/multiregion-availability/>Multiregion Availability</a></li><li><a href=/dcs/concepts/limits/>Usage Limits</a></li><li><a href=/dcs/concepts/satellite/>Satellite (Metadata Region)</a></li><li><a href=/dcs/concepts/s3-compatibility/>S3 Compatibility</a></li><li><a href=/dcs/concepts/file-repair/>File Repair</a></li></ul></li><li class=book-section-flat><span>Support</span><ul><li><a href=/dcs/support/support-process-overview/>Support Overview</a></li><li><a href=/dcs/support/faqs/>FAQ</a></li><li><a href=https://forum.storj.io/c/engineer-amas/dev-category class=book-external-link target=_blank rel=noopener>Community Forum<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://status.tardigrade.io class=book-external-link target=_blank rel=noopener>Status Page<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://support.tardigrade.io class=book-external-link target=_blank rel=noopener>Help Desk<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li><li class=book-section-flat><span>Billing, Payment & Accounts</span><ul><li><input type=checkbox id=section-e86e5160b6cbbb979535071ad9af4793 class=toggle>
<label for=section-e86e5160b6cbbb979535071ad9af4793 class="flex justify-between"><a href=/dcs/billing-payment-and-accounts-1/pricing/>Billing, Payment and Accounts</a></label><ul><li><a href=/dcs/billing-payment-and-accounts-1/pricing/billing-and-payment/>How Billing is Calculated</a></li><li><a href=/dcs/billing-payment-and-accounts-1/pricing/free-tier/>Free Plan</a></li><li><a href=/dcs/billing-payment-and-accounts-1/pricing/usage-limit-increases/>Usage Limit Increases</a></li></ul></li><li><input type=checkbox id=section-4e3c83ea13e2e7ae2025639618d7fec3 class=toggle>
<label for=section-4e3c83ea13e2e7ae2025639618d7fec3 class="flex justify-between"><a href=/dcs/billing-payment-and-accounts-1/storj-token/>Payment Methods</a></label><ul><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/promotional-credits/>Promotional Credits</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/debits-against-payment-methods/>Debits Against Payment Methods</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/changing-payment-methods/>Changing Payment Methods</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/deleting-a-payment-method/>Deleting a Payment Method</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/expired-credit-card/>Expired Credit Card</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/reporting-a-payment-problem/>Reporting a Payment Problem</a></li></ul></li><li><a href=/dcs/billing-payment-and-accounts-1/requesting-a-refund/>Requesting a Refund</a></li><li><a href=/dcs/billing-payment-and-accounts-1/closing-an-account/>Closing an Account</a></li><li><a href=/dcs/billing-payment-and-accounts-1/data-retention-policy/>Data Retention Policy</a></li></ul></li><li class=book-section-flat><span>Resources</span><ul><li><a href=https://www.storj.io/storjv3.pdf class=book-external-link target=_blank rel=noopener>Whitepaper<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>How Encryption is Implemented</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#ensuring-the-privacy-and-security-of-data-on-storj-dcs>Ensuring the Privacy and Security of Data on Storj DCS</a><ul><li></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=how-encryption-is-implemented>How Encryption is Implemented
<a class=anchor href=#how-encryption-is-implemented>#</a></h1><h2 id=ensuring-the-privacy-and-security-of-data-on-storj-dcs>Ensuring the Privacy and Security of Data on Storj DCS
<a class=anchor href=#ensuring-the-privacy-and-security-of-data-on-storj-dcs>#</a></h2><p>All data stored on the distributed and decentralized network of storage nodes and all metadata stored on Satellites is encrypted.</p><p>By encrypting file-paths, content, and metadata client-side, we avoid the danger of making this data available to attackers, and anyone else who is unable to derive the necessary encryption keys.</p><p>The network&rsquo;s encryption method is purposely designed to avoid using the same keys for content encryption of different files and different segments of the same file. This is advantageous not only because it makes file sharing of encrypted files more secure, but because it does not put other segments or files at risk if one of them is compromised.</p><p>The encryption algorithm we used for content and metadata is easily configurable between AES-GCM and “
<a href=https://nacl.cr.yp.to/secretbox.html>Secretbox</a>,” which are both authenticated encryption algorithms. This means that if any encrypted data is tampered with, the client downloading the data will know about it once the data is decrypted.</p><p>First, it’s critical to understand the definitions of a few key concepts used on the network for encryption.</p><ul><li><strong>Segment</strong>: The largest subdivision of a file. All the segments of a file are usually the same size. In most cases, the last segment will be smaller than the rest.</li><li><strong>Path</strong>: The representation for a file’s “location.” Paths are essentially an arbitrary number of strings delimited by slashes (e.g. <em>this/is/a/file.txt</em>). On the Storj network, the Satellite uses paths to keep track of file metadata as well as pointers to storage nodes that possess encrypted file content.</li><li><strong>Root secret</strong>: A private string defined by the client that is used to derive keys for encrypting and decrypting data stored on the network.</li><li><strong>Object key</strong>: A key derived from the root secret and the file path. There is a different path key for every element in the path, and a path key is used to derive new path keys for lower level path items.</li><li><strong>Random key</strong>: A randomly generated key used to encrypt segment content and metadata.</li><li><strong>Derived key</strong>: A key derived from the path key for the lowest level path element. The derived key is used to encrypt the random key before it is stored in a segment’s metadata.</li><li><strong>HMAC</strong>: Hash-based message authentication code. We generate HMACs using path elements and encryption keys in order to derive new keys for lower levels of the path. Using hashes makes it easy to generate keys from higher levels without making it possible to generate higher level keys from lower level ones.</li><li><strong>AES-GCM</strong>: An authenticated encryption algorithm that makes use of the Advanced Encryption Standard and uses the Galois/Counter mode for encrypting blocks.</li><li><strong>Secretbox</strong>: An authenticated encryption algorithm from the NaCl library that combines the Salsa20 encryption cipher and Poly1305 message authentication code.</li></ul><h4 id=path-encryption-a-hrefpath-encryption-idpath-encryptiona>Path Encryption <a href=#path-encryption id=path-encryption></a>
<a class=anchor href=#path-encryption-a-hrefpath-encryption-idpath-encryptiona>#</a></h4><p>Paths are encrypted in a hierarchical and deterministic way using the root encryption key. Each path component is encrypted separately based on information derived from previous path components.</p><p>Consider an unencrypted path <em>p</em> that is made up of path elements <em>p1/p2/…/pn</em>. The end goal is to generate an encrypted path <em>e</em>, which is made up of elements <em>e1/e2/…/en</em>. We have a root secret, s0, and can derive a path key using this secret, <em>k0</em> = <em>K(s0)</em>. We then define the next secret as <em>s1 = HMAC(s0, p1)</em> and encrypt the first path element as <em>e1 = encrypt(k0, p1)</em>. In more general terms, each derived secret <em>si</em> = <em>HMAC(si-1, pi)</em>, and each encrypted path element <em>ei = encrypt(ki-1, pi)</em> where the path key <em>ki-1 = K(si-1).</em></p><p>This method of path encryption allows us to do some interesting things. Consider a user, Brandon, with several files and subdirectories under the path <em>p1/p2/p3/</em>. Brandon wants to share everything under this path with Nat, another user, without revealing anything at a higher level <em>(p1/…, p1/p2/…)</em>. Brandon can provide Nat with the encrypted path <em>e1/e2/e3/</em> and the secret <em>s3</em>. Nat is now able to derive the encryption keys for any of Brandon’s files prefixed with the path <em>e1/e2/e3/</em>. However, she will be unable to decrypt any of the first three path elements or files that do not have the required prefix.</p><p>While there are many benefits to path encryption, one challenge exists around efficiently listing unencrypted file names. Since the order of listed items is determined by the paths stored on the Satellite, listed items will always be returned in order based on their encrypted path names, but will not be alphabetical when the paths are decrypted.</p><p>Users of the network are able to opt out of path encryption on a per-bucket basis because of this limitation. If a user opts out of encrypted paths, the paths will still only be visible to the Satellite. Storage nodes do not have information about paths or metadata associated with pieces they are storing.</p><h4 id=content-and-metadata-encryption-a-hrefcontent-and-metadata-encryption-idcontent-and-metadata-encryptiona>Content and Metadata Encryption <a href=#content-and-metadata-encryption id=content-and-metadata-encryption></a>
<a class=anchor href=#content-and-metadata-encryption-a-hrefcontent-and-metadata-encryption-idcontent-and-metadata-encryptiona>#</a></h4><p>When a user uploads a file, we read it one segment at a time on the client-side. Before each segment is split up, erasure encoded, and stored on remote storage nodes, we generate a random content encryption key. We also create a starting nonce equal to the segment number and use it along with the random key to encrypt the segment data.</p><p>Next, we generate the derived key, dk, which we define with <em>sn+1</em> = <em>HMAC(sn, “content”)</em>, where <em>dk</em> <em>=</em> <em>K(sn+1)</em> and <em>sn</em> is the last secret generated from the file path using the technique detailed above. The reason we add one more derivation step instead of setting <em>dk = K(sn)</em> is because a file path can also be a prefix for other file paths. For instance, <em>a/b/c</em> is a valid file path, but so is <em>a/b/c/d</em>. If Brandon wants to share <em>a/b/c</em> with Nat, he should be able to provide Nat with a derived key to decrypt the file <em>c</em>, but it shouldn’t be possible for Nat to derive the key to access the file <em>d</em> even though it has the same prefix. By adding one more dimension of key derivation for content encryption, we avoid this issue.</p><p>Each segment has metadata associated with it on the Satellite. Segment metadata includes the random key used to encrypt that segment’s content. We encrypt the random key with the derived key (dk) and a randomly generated nonce. The nonce is stored along with the encrypted content key in the segment metadata. This way, we use a different random encryption key for each segment, but anyone with the derived key can decrypt those keys.</p><p>The last segment’s metadata contains information in addition to the encrypted key and key nonce. The additional information is the metadata for the entire file. Some of this metadata is unencrypted, such as encryption type (AES-GCM or Secretbox) and encryption block size, since they are necessary to properly decrypt the file and metadata. The remainder of the metadata, which includes the number of segments, segment size, last segment size, and additional arbitrary metadata is encrypted with the last segment’s random content encryption key.</p><p>In summary, encryption and security on decentralized cloud storage networks has been carefully thought out to enable the sharing of files without compromising entire buckets of data. Cloud storage platforms must have the ability to easily share data for deployments like CDNs, websites and other use-cases. By deriving keys hierarchically from file paths, and encrypting data with different keys, Storj DCS maintains data privacy without removing important features.</p><p>This description pulls heavily from Moby Von Briesen&rsquo;s blog post, located here:
<a href=https://storj.io/blog/2018/11/security-and-encryption-on-the-v3-network/>https://storj.io/blog/2018/11/security-and-encryption-on-the-v3-network/</a></p><p>You can read more about encryption on the V3 Storj network in sections 3.6 and 4.1 of
<a href=https://www.storj.io/whitepaper>our whitepaper</a>.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#ensuring-the-privacy-and-security-of-data-on-storj-dcs>Ensuring the Privacy and Security of Data on Storj DCS</a><ul><li></li></ul></li></ul></nav></div></aside></main></body></html>