<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A local application that mimics the AWS S3 API. Migrate your data from AWS to Storj DCS with minimal effort."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Self-hosted S3 Compatible Gateway"><meta property="og:description" content="A local application that mimics the AWS S3 API. Migrate your data from AWS to Storj DCS with minimal effort."><meta property="og:type" content="website"><meta property="og:url" content="/dcs/api-reference/s3-gateway/"><title>Self-hosted S3 Compatible Gateway | Storj Docs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f89e84d24aa67a9627cfb7a3b446b3b062a451eebceb8d5f060601553c0a6cfb.css><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.afc156b59ccdf08ee689010e2667621d6ac7b00f30a969882371f26dd69b9b61.js></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js></script>
<link rel=alternate type=application/rss+xml href=/dcs/api-reference/s3-gateway/index.xml title="Storj Docs"><link rel=subresource href=/fonts/Inter-roman.var.woff2><link rel=subresource href=/fonts/Inter-italic.var.woff2></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Storj Docs</span></a></h2><div class=book-search><input type=text id=book-search-input data-filter=/dcs/ placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul class=book-first-sections><li class=active><a href=/dcs/>DCS</a></li><li><a href=/node/>Node Operator</a></li></ul><ul><li class=book-section-flat><span>Decentralized Cloud Storage</span><ul><li><a href=/dcs/storage/considerations/>Product Overview</a></li></ul></li><li class=book-section-flat><span>Downloads</span><ul><li><a href=/dcs/downloads/download-uplink-cli/>Download Uplink CLI</a></li><li><a href=/dcs/downloads/download-self-hosted-s3-compatible-gateway/>Download Self-hosted S3 Compatible Gateway</a></li><li><a href=/dcs/downloads/download-storj-client-libraries/>Download Storj Client Libraries</a></li></ul></li><li class=book-section-flat><span>Getting Started</span><ul><li><a href=/dcs/getting-started/quickstart-guide/>Quickstart Guide</a></li><li><a href=/dcs/getting-started/quickstart-objectbrowser/>Quickstart - Object Browser</a></li><li><input type=checkbox id=section-8a2bc98c91c60155c8bcc6967e5b3cf7 class=toggle>
<label for=section-8a2bc98c91c60155c8bcc6967e5b3cf7 class="flex justify-between"><a href=/dcs/getting-started/gateway-mt/>Quickstart - AWS CLI and Hosted Gateway MT</a></label><ul><li><a href=/dcs/getting-started/gateway-mt/aws-cli-advanced-options/>AWS CLI Advanced Options</a></li></ul></li><li><a href=/dcs/getting-started/quickstart-aws-sdk-and-hosted-gateway-mt/>Quickstart - AWS SDK and Hosted Gateway MT</a></li><li><input type=checkbox id=section-eb51eff27101399663fec0a5feb790b7 class=toggle>
<label for=section-eb51eff27101399663fec0a5feb790b7 class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/>Quickstart - Uplink CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/prerequisites/>Prerequisites</a></li><li><input type=checkbox id=section-1cc3e1bb03e2e308966123bb1cc84dfc class=toggle>
<label for=section-1cc3e1bb03e2e308966123bb1cc84dfc class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/>Uploading Your First Object CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-first-access-grant/>Create an Access Grant</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/set-up-uplink-cli/>Set Up Uplink CLI with Access Grant</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-a-bucket/>Create a Bucket</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/upload-an-object/>Upload an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/view-distribution-of-an-object/>View Distribution of an Object</a></li></ul></li><li><input type=checkbox id=section-ef98e9c48f14a1e6e3291b7ffdd021df class=toggle>
<label for=section-ef98e9c48f14a1e6e3291b7ffdd021df class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/>Interacting With Your First Object CLI</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/list-an-object/>List an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/download-an-object/>Download an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/interacting-with-your-first-object/delete-an-object/>Delete an Object</a></li></ul></li><li><input type=checkbox id=section-583035221fd089be3bccd9566e3d01dd class=toggle>
<label for=section-583035221fd089be3bccd9566e3d01dd class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/>Sharing Your First Object</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/prerequisites/>Prerequisites</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/generate-access/>Create an Access to an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/import-access/>Import an Access to an Object</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/revoke-an-access-to-an-object/>Revoke an Access to an Object</a></li></ul></li><li><input type=checkbox id=section-5272dcaf3a9682609c7d3fdd368cf961 class=toggle>
<label for=section-5272dcaf3a9682609c7d3fdd368cf961 class="flex justify-between"><a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/>Advanced Usage</a></label><ul><li><a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/generate-a-token/>Create Access Grant in CLI</a></li></ul></li></ul></li><li><input type=checkbox id=section-e035376383ed4301f1acc99452a9495f class=toggle>
<label for=section-e035376383ed4301f1acc99452a9495f class="flex justify-between"><a href=/dcs/getting-started/satellite-developer-account/>Quickstart - Satellite Admin Console</a></label><ul><li><a href=/dcs/getting-started/satellite-developer-account/creating-your-account/>Creating Your Account</a></li><li><a href=/dcs/getting-started/satellite-developer-account/manage-projects/>Manage Projects</a></li><li><a href=/dcs/getting-started/satellite-developer-account/dashboard/>Dashboard</a></li><li><a href=/dcs/getting-started/satellite-developer-account/objects/>Buckets</a></li><li><a href=/dcs/getting-started/satellite-developer-account/access-grants/>Access</a></li><li><a href=/dcs/getting-started/satellite-developer-account/users/>Users</a></li><li><a href=/dcs/getting-started/satellite-developer-account/billing/>Billing</a></li><li><a href=/dcs/getting-started/satellite-developer-account/resources/>Resources</a></li><li><a href=/dcs/getting-started/satellite-developer-account/quick-start/>Quick Start</a></li><li><a href=/dcs/getting-started/satellite-developer-account/my-account/>My Account</a></li></ul></li></ul></li><li class=book-section-flat><span>SDK & Reference</span><ul><li><input type=checkbox id=section-e71eaa406f51abd64ce74a83dbe5dd13 class=toggle>
<label for=section-e71eaa406f51abd64ce74a83dbe5dd13 class="flex justify-between"><a href=/dcs/api-reference/s3-compatible-gateway/>Storj-hosted S3 Compatible Gateway</a></label><ul><li><input type=checkbox id=section-5fc59ab320b4677ae3ebd53fe7b10db5 class=toggle>
<label for=section-5fc59ab320b4677ae3ebd53fe7b10db5 class="flex justify-between"><a href=/dcs/api-reference/s3-compatible-gateway/multipart-upload/>Multipart Upload</a></label><ul><li><a href=/dcs/api-reference/s3-compatible-gateway/multipart-upload/multipart-part-size/>Multipart Part Size</a></li></ul></li><li><a href=/dcs/api-reference/s3-compatible-gateway/using-presigned-urls/>Using presigned URLs</a></li><li><a href=/dcs/api-reference/s3-compatible-gateway/supported-s3-commands/>Supported S3 Commands</a></li></ul></li><li><input type=checkbox id=section-e534a50d47604ebc17cdb3d09a7bbe5c class=toggle>
<label for=section-e534a50d47604ebc17cdb3d09a7bbe5c class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/>Uplink CLI</a></label><ul><li><input type=checkbox id=section-ab2e55a365604a01b5cad7151a01b544 class=toggle>
<label for=section-ab2e55a365604a01b5cad7151a01b544 class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/access-command/>access</a></label><ul><li><a href=/dcs/api-reference/uplink-cli/access-command/access-inspect-command/>access inspect</a></li><li><a href=/dcs/api-reference/uplink-cli/access-command/access-list-command/>access list</a></li><li><a href=/dcs/api-reference/uplink-cli/access-command/access-register/>access register</a></li></ul></li><li><a href=/dcs/api-reference/uplink-cli/cp-command/>cp</a></li><li><a href=/dcs/api-reference/uplink-cli/import-command/>import</a></li><li><a href=/dcs/api-reference/uplink-cli/ls-command/>ls</a></li><li><a href=/dcs/api-reference/uplink-cli/uplink-mb-command/>mb</a></li><li><input type=checkbox id=section-12823ba9c45a10b81b0eaecb4dfc8ebb class=toggle>
<label for=section-12823ba9c45a10b81b0eaecb4dfc8ebb class="flex justify-between"><a href=/dcs/api-reference/uplink-cli/meta-command/>meta</a></label><ul><li><a href=/dcs/api-reference/uplink-cli/meta-command/meta-get-command/>meta get</a></li></ul></li><li><a href=/dcs/api-reference/uplink-cli/mv/>mv</a></li><li><a href=/dcs/api-reference/uplink-cli/rb-command/>rb</a></li><li><a href=/dcs/api-reference/uplink-cli/rm-command/>rm</a></li><li><a href=/dcs/api-reference/uplink-cli/setup-command/>setup</a></li><li><a href=/dcs/api-reference/uplink-cli/share-command/>share</a></li></ul></li><li><input type=checkbox id=section-03ffd000c84f3189e27b539e51443e62 class=toggle checked>
<label for=section-03ffd000c84f3189e27b539e51443e62 class="flex justify-between"><a href=/dcs/api-reference/s3-gateway/ class=active>Self-hosted S3 Compatible Gateway</a></label><ul><li><a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/>Gateway ST Advanced Usage</a></li></ul></li><li><a href=/dcs/api-reference/linksharing-service/>Linksharing Service</a></li><li><input type=checkbox id=section-0848317479e2fc58b812eefd4912b4a4 class=toggle>
<label for=section-0848317479e2fc58b812eefd4912b4a4 class="flex justify-between"><a href=/dcs/api-reference/storj-client-libraries/>Storj Client Libraries</a></label><ul><li><a href=https://github.com/storj/uplink class=book-external-link target=_blank rel=noopener>Go<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-c class=book-external-link target=_blank rel=noopener>C<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-android class=book-external-link target=_blank rel=noopener>Android<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://github.com/storj/uplink-java class=book-external-link target=_blank rel=noopener>Java<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://www.npmjs.com/package/uplink-nodejs class=book-external-link target=_blank rel=noopener>NodeJS<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></li><li class=book-section-flat><span>How To's</span><ul><li><a href=/dcs/how-tos/container-registry-docker/>Container Registry - Docker</a></li><li><input type=checkbox id=section-591e24e11327becce048ce6a5d0b3e18 class=toggle>
<label for=section-591e24e11327becce048ce6a5d0b3e18 class="flex justify-between"><a href=/dcs/how-tos/host-a-static-website/>Host a Static Website</a></label><ul><li><a href=/dcs/how-tos/host-a-static-website/host-a-static-website-with-the-cli-and-linksharing-service/>Host a Static Website with the Uplink CLI and Linksharing Service</a></li></ul></li><li><a href=/dcs/how-tos/configure-tools-for-the-partner-program/>Configure Tools for the Partner Program</a></li><li><a href=/dcs/how-tos/fastly-integration/>Fastly Integration</a></li><li><a href=https://filebase.com class=book-external-link target=_blank rel=noopener>Configure Filebase for easy upload<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=/dcs/how-tos/backup-with-duplicati/>Backup With Duplicati</a></li><li><a href=/dcs/how-tos/nft-storage/>NFT storage for OpenSea</a></li><li><input type=checkbox id=section-8fe4791a1117b6b147a551b2324e5838 class=toggle>
<label for=section-8fe4791a1117b6b147a551b2324e5838 class="flex justify-between"><a href=/dcs/how-tos/sync-files-with-rclone/>Sync Files With Rclone</a></label><ul><li><a href=/dcs/how-tos/sync-files-with-rclone/rclone-with-native-integration/>Rclone with Native Integration</a></li><li><a href=/dcs/how-tos/sync-files-with-rclone/rclone-with-hosted-gateway/>Rclone with Hosted Gateway</a></li></ul></li><li><a href=/dcs/how-tos/backup-with-restic/>Backup With Restic</a></li><li><a href=/dcs/how-tos/set-up-filezilla-for-decentralized-file-transfer/>FileZilla Native Integration</a></li><li><a href=/dcs/how-tos/filezilla-pro-integration-guide/>Filezilla Pro Integration Guide</a></li><li><a href=/dcs/how-tos/mongodb-ops-manager-backup/>MongoDB Ops Manager Backup</a></li><li><a href=/dcs/how-tos/tesla-sentry-mode-teslausb/>Store Tesla Sentry Mode & Dashcam videos on Storj DCS</a></li><li><a href=/dcs/how-tos/how-to-connect-s3fs-to-storj-dcs/>How to connect s3fs to Storj DCS</a></li><li><a href=/dcs/how-tos/how-to-set-up-video-analytics-and-video-management-with-kerberos-vault/>How to set up video analytics and video management with Kerberos Vault</a></li><li><a href=/dcs/how-tos/how-to-hod-rod-file-transfer-performance-on-storj-dcs/>How to Hod Rod File Transfer Performance on Storj DCS</a></li><li><a href=/dcs/how-tos/backups-with-hashbackup/>Backups with HashBackup</a></li><li><a href=/dcs/how-tos/how-to-use-plex-and-storj-dcs-as-a-private-streaming-service/>How to use Plex and Storj DCS as a private streaming service</a></li><li><a href=/dcs/how-tos/how-to-use-cyberduck-and-storj-dcs/>How to use Cyberduck and Storj DCS</a></li><li><a href=/dcs/how-tos/storj-ipfs-pinning-service-beta/>Storj IPFS Pinning Service (Beta)</a></li><li><a href=/dcs/how-tos/simplify-file-management-with-s3-browser-and-storj-dcs/>Simplify File Management with S3 Browser and Storj DCS</a></li><li><a href=/dcs/how-tos/kubernetes-backup-via-velero/>Kubernetes Backup via Velero</a></li></ul></li><li class=book-section-flat><span>Solution Architectures</span><ul><li><a href=/dcs/solution-architectures/common-use-cases/>Common Use Cases</a></li><li><a href=/dcs/solution-architectures/common-architectural-patterns/>Common Architectural Patterns</a></li></ul></li><li class=book-section-flat><span>Concepts</span><ul><li><a href=/dcs/concepts/overview/>Understanding Storj DCS</a></li><li><a href=/dcs/concepts/definitions/>Definitions</a></li><li><a href=/dcs/concepts/key-architecture-constructs/>Key Architecture Constructs</a></li><li><input type=checkbox id=section-e3983b48cc8585311f4fd92a3441c885 class=toggle>
<label for=section-e3983b48cc8585311f4fd92a3441c885 class="flex justify-between"><a href=/dcs/concepts/access/>Access Management</a></label><ul><li><input type=checkbox id=section-2aaccce9e50f91dfc9ae1f4f2919e73d class=toggle>
<label for=section-2aaccce9e50f91dfc9ae1f4f2919e73d class="flex justify-between"><a href=/dcs/concepts/access/access-grants/>Access Grants</a></label><ul><li><input type=checkbox id=section-6532f8fab18a0bf2730b54084407ef27 class=toggle>
<label for=section-6532f8fab18a0bf2730b54084407ef27 class="flex justify-between"><a href=/dcs/concepts/access/access-grants/api-key/>API Key</a></label><ul><li><a href=/dcs/concepts/access/access-grants/api-key/restriction/>Access Restrictions</a></li></ul></li><li><a href=/dcs/concepts/access/access-grants/when-to-use-the-satellite-web-interface-and-when-to-use-the-cli/>When to use the Satellite Web Interface and When to use the CLI</a></li></ul></li><li><input type=checkbox id=section-d17166aeaa257fe6cfe34e9469861364 class=toggle>
<label for=section-d17166aeaa257fe6cfe34e9469861364 class="flex justify-between"><a href=/dcs/concepts/access/encryption-and-keys/>Encryption Keys</a></label><ul><li><a href=/dcs/concepts/access/encryption-and-keys/key-management/>Key Management</a></li><li><a href=/dcs/concepts/access/encryption-and-keys/when-to-use-different-encryption-keys/>When to use different encryption keys</a></li></ul></li><li><a href=/dcs/concepts/access/access-revocation/>Access Revocation</a></li><li><a href=/dcs/concepts/access/capability-based-access-control/>Capability Based Access vs Access Control Lists</a></li><li><a href=/dcs/concepts/access/access-management-at-the-edge/>Access Management at the Edge</a></li></ul></li><li><input type=checkbox id=section-32bee2047eb722c84da55e9b4fbd0a7e class=toggle>
<label for=section-32bee2047eb722c84da55e9b4fbd0a7e class="flex justify-between"><a href=/dcs/concepts/edge-services/>Edge Services</a></label><ul><li><a href=/dcs/concepts/edge-services/auth-service/>Auth Service</a></li></ul></li><li><a href=/dcs/concepts/connectors/>Connectors</a></li><li><a href=/dcs/concepts/data-structure/>Data Structure</a></li><li><input type=checkbox id=section-273072f64771f53acb81a101acf9cdb9 class=toggle>
<label for=section-273072f64771f53acb81a101acf9cdb9 class="flex justify-between"><a href=/dcs/concepts/encryption-key/>Encryption</a></label><ul><li><a href=/dcs/concepts/encryption-key/how-encryption-is-implemented/>How Encryption is Implemented</a></li><li><a href=/dcs/concepts/encryption-key/design-decision-end-to-end-encryption/>Design Decision: End-to-end Encryption</a></li><li><a href=/dcs/concepts/encryption-key/design-decision-server-side-encryption/>Design Decision: Server-side Encryption</a></li></ul></li><li><input type=checkbox id=section-390f7f447019f4755db05aad8ca13661 class=toggle>
<label for=section-390f7f447019f4755db05aad8ca13661 class="flex justify-between"><a href=/dcs/concepts/decentralization/>Decentralization</a></label><ul><li><a href=/dcs/concepts/decentralization/coordination-avoidance/>Coordination Avoidance</a></li></ul></li><li><a href=/dcs/concepts/file-redundancy/>File Redundancy</a></li><li><a href=/dcs/concepts/multiregion-availability/>Multiregion Availability</a></li><li><a href=/dcs/concepts/limits/>Usage Limits</a></li><li><a href=/dcs/concepts/satellite/>Satellite (Metadata Region)</a></li><li><a href=/dcs/concepts/s3-compatibility/>S3 Compatibility</a></li><li><a href=/dcs/concepts/file-repair/>File Repair</a></li></ul></li><li class=book-section-flat><span>Support</span><ul><li><a href=/dcs/support/support-process-overview/>Support Overview</a></li><li><a href=/dcs/support/faqs/>FAQ</a></li><li><a href=https://forum.storj.io/c/engineer-amas/dev-category class=book-external-link target=_blank rel=noopener>Community Forum<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://status.tardigrade.io class=book-external-link target=_blank rel=noopener>Status Page<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li><li><a href=https://support.tardigrade.io class=book-external-link target=_blank rel=noopener>Help Desk<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li><li class=book-section-flat><span>Billing, Payment & Accounts</span><ul><li><input type=checkbox id=section-e86e5160b6cbbb979535071ad9af4793 class=toggle>
<label for=section-e86e5160b6cbbb979535071ad9af4793 class="flex justify-between"><a href=/dcs/billing-payment-and-accounts-1/pricing/>Billing, Payment and Accounts</a></label><ul><li><a href=/dcs/billing-payment-and-accounts-1/pricing/billing-and-payment/>How Billing is Calculated</a></li><li><a href=/dcs/billing-payment-and-accounts-1/pricing/free-tier/>Free Plan</a></li><li><a href=/dcs/billing-payment-and-accounts-1/pricing/usage-limit-increases/>Usage Limit Increases</a></li></ul></li><li><input type=checkbox id=section-4e3c83ea13e2e7ae2025639618d7fec3 class=toggle>
<label for=section-4e3c83ea13e2e7ae2025639618d7fec3 class="flex justify-between"><a href=/dcs/billing-payment-and-accounts-1/storj-token/>Payment Methods</a></label><ul><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/promotional-credits/>Promotional Credits</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/debits-against-payment-methods/>Debits Against Payment Methods</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/changing-payment-methods/>Changing Payment Methods</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/deleting-a-payment-method/>Deleting a Payment Method</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/expired-credit-card/>Expired Credit Card</a></li><li><a href=/dcs/billing-payment-and-accounts-1/storj-token/reporting-a-payment-problem/>Reporting a Payment Problem</a></li></ul></li><li><a href=/dcs/billing-payment-and-accounts-1/requesting-a-refund/>Requesting a Refund</a></li><li><a href=/dcs/billing-payment-and-accounts-1/closing-an-account/>Closing an Account</a></li><li><a href=/dcs/billing-payment-and-accounts-1/data-retention-policy/>Data Retention Policy</a></li></ul></li><li class=book-section-flat><span>Resources</span><ul><li><a href=https://www.storj.io/storjv3.pdf class=book-external-link target=_blank rel=noopener>Whitepaper<img src=/svg/external-link.svg class=book-icon alt="External Link"></a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Self-hosted S3 Compatible Gateway</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#minimum-requirements>Minimum Requirements</a></li><li><a href=#dependencies>Dependencies</a></li><li><a href=#steps>Steps:</a></li><li><a href=#get-and-install-gateway-st>Get and install Gateway ST</a></li><li><a href=#configure-gateway-st>Configure Gateway ST</a><ul><li><a href=#interactive-setup>Interactive Setup</a></li><li><a href=#using-an-access-grant>Using an Access Grant</a></li></ul></li><li><a href=#run-gateway-st>Run Gateway ST</a></li><li><a href=#configure-aws-cli-to-use-gateway-st>Configure AWS CLI to use Gateway ST</a></li><li><a href=#try-it-out>Try it out!</a><ul><li></li></ul></li><li><a href=#all-commands>All Commands</a></li></ul></nav></aside></header><article class=markdown><h1 id=self-hosted-s3-compatible-gateway>Self-hosted S3 Compatible Gateway
<a class=anchor href=#self-hosted-s3-compatible-gateway>#</a></h1><blockquote class="book-hint info">A download can become a chargeable event for 2 times the actual file size if the gateway is running on another cloud provider. We recommend interfacing with the network directly through the
<a href=/dcs/api-reference/uplink-cli/>Uplink Library</a> or using our
<a href=/dcs/getting-started/gateway-mt/>hosted Gateway MT</a>.</blockquote><p>For a complete list of the supported architectures and API calls for the S3 Gateway, see
<a href=/dcs/concepts/s3-compatibility/>Concepts: S3 Compatibility</a>.</p><h2 id=minimum-requirements>Minimum Requirements
<a class=anchor href=#minimum-requirements>#</a></h2><p>✅ 1 CPU</p><p>✅ 2GB of RAM</p><p>Depending on the load and throughput, more resources may be required.</p><blockquote class="book-hint warning">To save on costs and improve performance, please see
<a href=/dcs/api-reference/s3-compatible-gateway/multipart-upload/multipart-part-size/>this important note on multipart upload part sizes</a>.</blockquote><h2 id=dependencies>Dependencies
<a class=anchor href=#dependencies>#</a></h2><p>✅
<a href=/dcs/getting-started/quickstart-uplink-cli/prerequisites/#create-an-account>Storj DCS Satellite Account</a></p><p>✅
<a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/generate-a-token/>Storj DCS Satellite token</a> or
<a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-first-access-grant/>Access grant</a></p><h2 id=steps>Steps:
<a class=anchor href=#steps>#</a></h2><ol><li><a href=/dcs/api-reference/s3-gateway/#get-and-install-gateway-st>Get and install Gateway ST</a></li><li><a href=/dcs/api-reference/s3-gateway/#configure-gateway-st>Configure Gateway ST</a></li><li><a href=/dcs/api-reference/s3-gateway/#run-gateway-st>Run Gateway ST</a></li><li><a href=/dcs/api-reference/s3-gateway/#configure-aws-cli-to-use-gateway-st>Configure AWS CLI to use Gateway ST</a></li><li><a href=/dcs/api-reference/s3-gateway/#try-it-out>Try it out!</a></li></ol><h2 id=get-and-install-gateway-st>Get and install Gateway ST
<a class=anchor href=#get-and-install-gateway-st>#</a></h2><p>Download, unzip, and install the binary for your OS:</p><div class=book-tabs><input type=radio class=toggle name=tabs-id1 id=tabs-id1-0 checked>
<label for=tabs-id1-0>Windows</label><div class="book-tabs-content markdown-inner"><h4 id=curl-download-powershell>Curl Download (PowerShell)
<a class=anchor href=#curl-download-powershell>#</a></h4><pre tabindex=0><code>curl https://github.com/storj/gateway-st/releases/latest/download/gateway_windows_amd64.exe.zip -o gateway_windows_amd64.exe.zip; Expand-Archive gateway_windows_amd64.exe.zip -Destination . -Force
</code></pre><h4 id=direct-download>Direct Download
<a class=anchor href=#direct-download>#</a></h4><p><a href=https://github.com/storj/gateway-st/releases/latest/download/gateway_windows_amd64.exe.zip>Windows Gateway Binary</a></p></div><input type=radio class=toggle name=tabs-id1 id=tabs-id1-1>
<label for=tabs-id1-1>Linux</label><div class="book-tabs-content markdown-inner"><h3 id=amd64>AMD64
<a class=anchor href=#amd64>#</a></h3><h4 id=curl-download>Curl Download
<a class=anchor href=#curl-download>#</a></h4><pre tabindex=0><code>curl -L https://github.com/storj/gateway-st/releases/latest/download/gateway_linux_amd64.zip -O &amp;&amp; unzip gateway_linux_amd64.zip
chmod 755 gateway
sudo mv gateway /usr/local/bin/gateway
</code></pre><h4 id=direct-download>Direct Download
<a class=anchor href=#direct-download>#</a></h4><p><a href=https://github.com/storj/gateway-st/releases/latest/download/gateway_linux_amd64.zip>Linux AMD64 Gateway Binary</a></p><h3 id=arm>ARM
<a class=anchor href=#arm>#</a></h3><h4 id=curl-download-1>Curl Download
<a class=anchor href=#curl-download-1>#</a></h4><pre tabindex=0><code>curl -L https://github.com/storj/gateway-st/releases/latest/download/gateway_linux_arm.zip -O &amp;&amp; unzip gateway_linux_arm.zip
chmod 755 gateway
sudo mv gateway /usr/local/bin/gateway
</code></pre><h4 id=direct-download-1>Direct Download
<a class=anchor href=#direct-download-1>#</a></h4><p><a href=https://github.com/storj/gateway-st/releases/latest/download/gateway_linux_arm.zip>Linux ARM Gateway Binary</a></p></div><input type=radio class=toggle name=tabs-id1 id=tabs-id1-2>
<label for=tabs-id1-2>macOS</label><div class="book-tabs-content markdown-inner"><h4 id=curl-download>Curl Download
<a class=anchor href=#curl-download>#</a></h4><pre tabindex=0><code>curl -L https://github.com/storj/gateway-st/releases/latest/download/gateway_darwin_amd64.zip -O &amp;&amp; unzip gateway_darwin_amd64.zip
chmod 755 gateway
sudo mv gateway /usr/local/bin/gateway
</code></pre><h4 id=direct-download>Direct Download
<a class=anchor href=#direct-download>#</a></h4><p><a href=https://github.com/storj/gateway-st/releases/latest/download/gateway_darwin_amd64.zip>macOS Gateway Binary</a></p></div><input type=radio class=toggle name=tabs-id1 id=tabs-id1-3>
<label for=tabs-id1-3>Docker</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>docker pull storjlabs/gateway
</code></pre></div></div><h2 id=configure-gateway-st>Configure Gateway ST
<a class=anchor href=#configure-gateway-st>#</a></h2><p>You have two ways to configure your Gateway ST:</p><ol><li><a href=/dcs/api-reference/s3-gateway/#interactive-setup>Interactive Setup</a> (only if it is your first setup)</li><li><a href=/dcs/api-reference/s3-gateway/#using-an-access-grant>Using an Access Grant</a></li></ol><h3 id=interactive-setup>Interactive Setup
<a class=anchor href=#interactive-setup>#</a></h3><p>1. Setup your S3 gateway by running the following command and following the instructions provided by the wizard:</p><div class=book-tabs><input type=radio class=toggle name=tabs-id2 id=tabs-id2-0 checked>
<label for=tabs-id2-0>Windows</label><div class="book-tabs-content markdown-inner"><h4 id=powershell>PowerShell
<a class=anchor href=#powershell>#</a></h4><p><a href=/dcs/support/faqs/#how-do-i-navigate-to-the-binary-location>Navigate to the directory your <strong>gateway.exe</strong> file is located in</a>.</p><pre tabindex=0><code>./gateway.exe setup
</code></pre></div><input type=radio class=toggle name=tabs-id2 id=tabs-id2-1>
<label for=tabs-id2-1>Linux</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gateway setup
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-id2 id=tabs-id2-2>
<label for=tabs-id2-2>macOS</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gateway setup
</span></span></code></pre></div></div><input type=radio class=toggle name=tabs-id2 id=tabs-id2-3>
<label for=tabs-id2-3>Docker</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>docker run -it --rm --mount type=bind,source=/path/to/gateway-config-dir/,destination=/root/.local/share/storj/gateway/ --name gateway storjlabs/gateway setup
</code></pre></div></div><p>2. Enter the numeric choice or satellite address corresponding to the satellite you&rsquo;ve created your account on.</p><p>The satellite address should be entered as &lt;nodeid>@&lt;address>:&lt;port> for example: <code>12L9ZFwhzVpuEKMUNUqkaTLGzwY9G24tbiigLiXpmZWKwmcNDDs@eu1.storj.io:7777</code>, or just use the number from the list:</p><p><img src=/dcs/_assets/image%20%28114%29.png alt></p><p>3. Choose an access name (this step may not yet be implemented in the version of S3 Gateway you are using - if you don&rsquo;t see this prompt, skip to step 5 below).</p><blockquote class="book-hint info">If you would like to choose your own access name, please be sure to only use lowercase letters. Including any uppercase letters will result in your access name not getting recognized when creating buckets.</blockquote><p><img src=/dcs/_assets/image%20%2844%29.png alt></p><p>4. Enter the
<a href=/dcs/getting-started/quickstart-uplink-cli/generate-access-grants-and-tokens/generate-a-token/>API Key</a> you generated:</p><p><img src=/dcs/_assets/image%20%281%29.png alt="Didn&amp;rsquo;t save your Access token? Simply create another one in the satellite web interface."></p><p>5. Create and confirm an encryption passphrase, which is used to encrypt your files before they are uploaded:</p><p><img src=/dcs/_assets/encryption%20passphrase.png alt></p><blockquote class="book-hint warning">Please note that <strong>Storj Labs does not know or store your encryption passphrase</strong>, so if you lose it, you will not be able to recover your files.</blockquote><p>6. Your S3 gateway is configured and ready to use!</p><h3 id=using-an-access-grant>Using an Access Grant
<a class=anchor href=#using-an-access-grant>#</a></h3><p>You can use two methods to obtain an Access Grant:</p><ol><li><a href=/dcs/getting-started/quickstart-uplink-cli/sharing-your-first-object/generate-access/>Obtain Access Grant with Uplink CLI</a></li><li><a href=/dcs/getting-started/quickstart-uplink-cli/uploading-your-first-object/create-first-access-grant/>Obtain Access Grant with a Satellite UI</a></li></ol><p>Now we got our access grant and can configure the gateway as follows:</p><div class=book-tabs><input type=radio class=toggle name=tabs-id3 id=tabs-id3-0 checked>
<label for=tabs-id3-0>Windows</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>./gateway setup --access 14aV.... --non-interactive
</code></pre></div><input type=radio class=toggle name=tabs-id3 id=tabs-id3-1>
<label for=tabs-id3-1>Linux</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>gateway setup --access 14aV.... --non-interactive
</code></pre></div><input type=radio class=toggle name=tabs-id3 id=tabs-id3-2>
<label for=tabs-id3-2>macOS</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>gateway setup --access 14aV.... --non-interactive
</code></pre></div><input type=radio class=toggle name=tabs-id3 id=tabs-id3-3>
<label for=tabs-id3-3>Docker</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>docker run -it --rm --mount type=bind,source=/path/to/gateway-config-dir/,destination=/root/.local/share/storj/gateway/ --name gateway storjlabs/gateway setup --access 14aV.... --non-interactive
</code></pre></div></div><p>This command will register the provided access as the default access in the gateway config file.</p><p>It is possible to have several access grants, see how
<a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/#adding-access-grants>here</a>.</p><h2 id=run-gateway-st>Run Gateway ST
<a class=anchor href=#run-gateway-st>#</a></h2><p>The gateway functions as a daemon. Start it and leave it running.</p><div class=book-tabs><input type=radio class=toggle name=tabs-id4 id=tabs-id4-0 checked>
<label for=tabs-id4-0>Windows</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>./gateway.exe run
</code></pre></div><input type=radio class=toggle name=tabs-id4 id=tabs-id4-1>
<label for=tabs-id4-1>Linux</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>gateway run
</code></pre></div><input type=radio class=toggle name=tabs-id4 id=tabs-id4-2>
<label for=tabs-id4-2>macOS</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>gateway run
</code></pre></div><input type=radio class=toggle name=tabs-id4 id=tabs-id4-3>
<label for=tabs-id4-3>Docker</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>docker run -it --rm -p 127.0.0.1:7777:7777 --mount type=bind,source=/path/to/gateway-config-dir/,destination=/root/.local/share/storj/gateway/ --name gateway storjlabs/gateway run
</code></pre><blockquote class="book-hint info">If you want to connect to your S3 Gateway via the network, then you should replace the <code>-p 127.0.0.1:7777:7777</code> port mapping with <code>-p 7777:7777</code></blockquote></div></div><p>The gateway should output your S3-compatible endpoint, access key, and secret key.</p><p><img src=/dcs/_assets/image%20%2843%29.png alt="Example terminal output"></p><p>If you are interested in more running options, checkout the Gateway ST Advanced Usage page where you can find how to:</p><ol><li><a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/#running-gateway-st-with-an-access-grant>Run Gateway ST with an Access Grant</a></li><li><a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/#running-gateway-st-to-host-a-static-website>Run Gateway ST to host a static website</a></li><li><a href=/dcs/api-reference/s3-gateway/gateway-st-advanced-usage/#running-gateway-st-to-host-a-static-website-with-cache>Run Gateway ST to host a static website with cache</a></li></ol><h2 id=configure-aws-cli-to-use-gateway-st>Configure AWS CLI to use Gateway ST
<a class=anchor href=#configure-aws-cli-to-use-gateway-st>#</a></h2><blockquote class="book-hint info">Please make sure you have
<a href=https://docs.aws.amazon.com/cli/latest/userguide/installing.html>AWS S3 CLI installed</a>.</blockquote><p>Once you do, in a new terminal session, configure it with your Gateway&rsquo;s credentials:</p><pre tabindex=0><code>$ aws configure
---
AWS Access Key ID: [Enter your Gateway&#39;s Access Key]
AWS Secret Access Key: [Enter your Gateway&#39;s Secret Key]
Default region name: [null]
Default output format: [null]

$ aws configure set default.s3.multipart_threshold 64MB
</code></pre><p>Then, test out some AWS S3 CLI commands!</p><blockquote class="book-hint success">See also
<a href=/dcs/getting-started/gateway-mt/aws-cli-advanced-options/>AWS CLI Advanced Options</a></blockquote><h2 id=try-it-out>Try it out!
<a class=anchor href=#try-it-out>#</a></h2><h4 id=create-a-bucket><strong>Create a bucket</strong>
<a class=anchor href=#create-a-bucket>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id5 id=tabs-id5-0 checked>
<label for=tabs-id5-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777/ mb s3://bucket-name
</code></pre></div></div><h4 id=upload-an-object><strong>Upload an object</strong>
<a class=anchor href=#upload-an-object>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id6 id=tabs-id6-0 checked>
<label for=tabs-id6-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777/ cp ~/Desktop/your-large-file.mp4 s3://bucket-name
</code></pre></div></div><h4 id=list-objects-in-a-bucket><strong>List objects in a bucket</strong>
<a class=anchor href=#list-objects-in-a-bucket>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id7 id=tabs-id7-0 checked>
<label for=tabs-id7-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777 ls s3://bucket-name/
</code></pre></div></div><h4 id=download-an-object><strong>Download an object</strong>
<a class=anchor href=#download-an-object>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id8 id=tabs-id8-0 checked>
<label for=tabs-id8-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777 cp s3://bucket-name/your-large-file.mp4 ~/Desktop/your-large-file.mp4
</code></pre></div></div><h4 id=generate-a-url-for-an-object><strong>Generate a URL for an object</strong>
<a class=anchor href=#generate-a-url-for-an-object>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id9 id=tabs-id9-0 checked>
<label for=tabs-id9-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777 presign s3://bucket-name/your-large-file.mp4
</code></pre></div></div><p>(This URL will allow live video streaming through your browser or VLC)</p><h4 id=delete-an-object><strong>Delete an object</strong>
<a class=anchor href=#delete-an-object>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-id10 id=tabs-id10-0 checked>
<label for=tabs-id10-0>AWS CLI</label><div class="book-tabs-content markdown-inner"><pre tabindex=0><code>aws s3 --endpoint=http://localhost:7777 rm s3://bucket-name/your-large-file.mp4
</code></pre></div></div><h2 id=all-commands>All Commands
<a class=anchor href=#all-commands>#</a></h2><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html><code>cp</code></a> - Copies a local file or S3 object to another location locally or in S3</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/ls.html><code>ls</code></a> - List S3 objects and common prefixes under a prefix or all S3 buckets</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/mb.html><code>mb</code></a> - Creates an S3 bucket</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/mv.html><code>mv</code></a> - Moves a local file or S3 object to another location locally or in S3.</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/presign.html><code>presign</code></a> - Generate a pre-signed URL for an S3 object. This allows anyone who receives the pre-signed URL to retrieve the S3 object with an HTTP GET request.</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/rb.html><code>rb</code></a> - Deletes an empty S3 bucket</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/rm.html><code>rm</code></a> - Deletes an S3 object</p><p><a href=https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html><code>sync</code></a> - Syncs directories and S3 prefixes. Recursively copies new and updated files from the source directory to the destination. Only creates folders in the destination if they contain one or more files</p><p>And that&rsquo;s it! You&rsquo;ve learned how to use our S3-compatible Gateway. Ideally, you&rsquo;ll see how easy it is to swap out AWS for the Uplink, going forward.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div class=toc-title>Contents</div><nav id=TableOfContents><ul><li><a href=#minimum-requirements>Minimum Requirements</a></li><li><a href=#dependencies>Dependencies</a></li><li><a href=#steps>Steps:</a></li><li><a href=#get-and-install-gateway-st>Get and install Gateway ST</a></li><li><a href=#configure-gateway-st>Configure Gateway ST</a><ul><li><a href=#interactive-setup>Interactive Setup</a></li><li><a href=#using-an-access-grant>Using an Access Grant</a></li></ul></li><li><a href=#run-gateway-st>Run Gateway ST</a></li><li><a href=#configure-aws-cli-to-use-gateway-st>Configure AWS CLI to use Gateway ST</a></li><li><a href=#try-it-out>Try it out!</a><ul><li></li></ul></li><li><a href=#all-commands>All Commands</a></li></ul></nav></div></aside></main></body></html>